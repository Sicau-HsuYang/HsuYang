<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL 学习笔记 | awesome-frontend-code</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2c567a12c7860a8915d6ce4cb17a538e";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
      </script>
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="HsuYang的个人博客，主要对于平时学习知识的理解与记录">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.8ba139c1.css" as="style"><link rel="preload" href="/assets/js/app.cf57dc69.js" as="script"><link rel="preload" href="/assets/js/2.bd5c3d55.js" as="script"><link rel="preload" href="/assets/js/12.335d2c6e.js" as="script"><link rel="preload" href="/assets/js/104.b3a749b1.js" as="script"><link rel="prefetch" href="/assets/js/10.8caa4559.js"><link rel="prefetch" href="/assets/js/100.5efd32ee.js"><link rel="prefetch" href="/assets/js/101.3a611e27.js"><link rel="prefetch" href="/assets/js/102.784c371f.js"><link rel="prefetch" href="/assets/js/103.439e47f8.js"><link rel="prefetch" href="/assets/js/105.72ac48b4.js"><link rel="prefetch" href="/assets/js/106.f6af21d8.js"><link rel="prefetch" href="/assets/js/11.552da99d.js"><link rel="prefetch" href="/assets/js/13.f0b73018.js"><link rel="prefetch" href="/assets/js/14.5923c42d.js"><link rel="prefetch" href="/assets/js/15.9e312296.js"><link rel="prefetch" href="/assets/js/16.ff6a70ab.js"><link rel="prefetch" href="/assets/js/17.021972b2.js"><link rel="prefetch" href="/assets/js/18.51fbeed9.js"><link rel="prefetch" href="/assets/js/19.16cbf22c.js"><link rel="prefetch" href="/assets/js/20.aa694a5f.js"><link rel="prefetch" href="/assets/js/21.25eab2c4.js"><link rel="prefetch" href="/assets/js/22.ed6caa9c.js"><link rel="prefetch" href="/assets/js/23.b22848e0.js"><link rel="prefetch" href="/assets/js/24.832d6098.js"><link rel="prefetch" href="/assets/js/25.063c25ea.js"><link rel="prefetch" href="/assets/js/26.216b9d7f.js"><link rel="prefetch" href="/assets/js/27.290be199.js"><link rel="prefetch" href="/assets/js/28.db78be5b.js"><link rel="prefetch" href="/assets/js/29.fdfe93c7.js"><link rel="prefetch" href="/assets/js/3.9f0d0369.js"><link rel="prefetch" href="/assets/js/30.118d6495.js"><link rel="prefetch" href="/assets/js/31.8b4bdb1c.js"><link rel="prefetch" href="/assets/js/32.3c495cbd.js"><link rel="prefetch" href="/assets/js/33.6c63bd6e.js"><link rel="prefetch" href="/assets/js/34.51cf2ac0.js"><link rel="prefetch" href="/assets/js/35.35936adb.js"><link rel="prefetch" href="/assets/js/36.6bbfe27d.js"><link rel="prefetch" href="/assets/js/37.9d4fa1c9.js"><link rel="prefetch" href="/assets/js/38.18b759f5.js"><link rel="prefetch" href="/assets/js/39.4bbcc3d9.js"><link rel="prefetch" href="/assets/js/4.7cc47491.js"><link rel="prefetch" href="/assets/js/40.ec6ad6ae.js"><link rel="prefetch" href="/assets/js/41.ddc57843.js"><link rel="prefetch" href="/assets/js/42.ed96b42f.js"><link rel="prefetch" href="/assets/js/43.187fab1e.js"><link rel="prefetch" href="/assets/js/44.3ebfb200.js"><link rel="prefetch" href="/assets/js/45.b0c5b5e4.js"><link rel="prefetch" href="/assets/js/46.916aefc0.js"><link rel="prefetch" href="/assets/js/47.102c59d7.js"><link rel="prefetch" href="/assets/js/48.cbb777df.js"><link rel="prefetch" href="/assets/js/49.fa70d513.js"><link rel="prefetch" href="/assets/js/5.582876a0.js"><link rel="prefetch" href="/assets/js/50.a286e0aa.js"><link rel="prefetch" href="/assets/js/51.aadbf339.js"><link rel="prefetch" href="/assets/js/52.5f94d184.js"><link rel="prefetch" href="/assets/js/53.484bf407.js"><link rel="prefetch" href="/assets/js/54.a032c68b.js"><link rel="prefetch" href="/assets/js/55.9b433869.js"><link rel="prefetch" href="/assets/js/56.afd1befb.js"><link rel="prefetch" href="/assets/js/57.fc44f736.js"><link rel="prefetch" href="/assets/js/58.f81c4790.js"><link rel="prefetch" href="/assets/js/59.295ef54e.js"><link rel="prefetch" href="/assets/js/6.4fc84576.js"><link rel="prefetch" href="/assets/js/60.7b4756b6.js"><link rel="prefetch" href="/assets/js/61.578991e9.js"><link rel="prefetch" href="/assets/js/62.405becac.js"><link rel="prefetch" href="/assets/js/63.03496911.js"><link rel="prefetch" href="/assets/js/64.e65b0153.js"><link rel="prefetch" href="/assets/js/65.797d649f.js"><link rel="prefetch" href="/assets/js/66.d51999d3.js"><link rel="prefetch" href="/assets/js/67.7a5da70a.js"><link rel="prefetch" href="/assets/js/68.d69243fb.js"><link rel="prefetch" href="/assets/js/69.343557d3.js"><link rel="prefetch" href="/assets/js/7.7367ce4c.js"><link rel="prefetch" href="/assets/js/70.1cc0fa02.js"><link rel="prefetch" href="/assets/js/71.7a463c03.js"><link rel="prefetch" href="/assets/js/72.e362c90f.js"><link rel="prefetch" href="/assets/js/73.50c34c83.js"><link rel="prefetch" href="/assets/js/74.3f3e01df.js"><link rel="prefetch" href="/assets/js/75.43cac074.js"><link rel="prefetch" href="/assets/js/76.5374f428.js"><link rel="prefetch" href="/assets/js/77.c04da063.js"><link rel="prefetch" href="/assets/js/78.1e77be3e.js"><link rel="prefetch" href="/assets/js/79.619ea147.js"><link rel="prefetch" href="/assets/js/8.57bbe225.js"><link rel="prefetch" href="/assets/js/80.2d9b5e47.js"><link rel="prefetch" href="/assets/js/81.6ee80ed2.js"><link rel="prefetch" href="/assets/js/82.c325841a.js"><link rel="prefetch" href="/assets/js/83.0013d355.js"><link rel="prefetch" href="/assets/js/84.7098dedf.js"><link rel="prefetch" href="/assets/js/85.30be3c08.js"><link rel="prefetch" href="/assets/js/86.cbf29e60.js"><link rel="prefetch" href="/assets/js/87.6a5b2e56.js"><link rel="prefetch" href="/assets/js/88.67707ead.js"><link rel="prefetch" href="/assets/js/89.6160008b.js"><link rel="prefetch" href="/assets/js/9.1f6e7616.js"><link rel="prefetch" href="/assets/js/90.c221b793.js"><link rel="prefetch" href="/assets/js/91.2d3ed40c.js"><link rel="prefetch" href="/assets/js/92.cf4035dd.js"><link rel="prefetch" href="/assets/js/93.7849279d.js"><link rel="prefetch" href="/assets/js/94.2e9ebdbd.js"><link rel="prefetch" href="/assets/js/95.1aed53d5.js"><link rel="prefetch" href="/assets/js/96.03f055cb.js"><link rel="prefetch" href="/assets/js/97.de35b498.js"><link rel="prefetch" href="/assets/js/98.5fcf7d6d.js"><link rel="prefetch" href="/assets/js/99.cf13fbc6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ba139c1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><!----> <header class="navbar"><div class="navbar-container"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">awesome-frontend-code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="search-icon"><path d="M21.7,20.3L18,16.6c1.2-1.5,2-3.5,2-5.6c0-5-4-9-9-9c-5,0-9,4-9,9c0,5,4,9,9,9c2.1,0,4.1-0.7,5.6-2l3.7,3.7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3C22.1,21.3,22.1,20.7,21.7,20.3zM4,11c0-3.9,3.1-7,7-7c3.9,0,7,3.1,7,7c0,1.9-0.8,3.7-2,4.9c0,0,0,0,0,0s0,0,0,0c-1.3,1.3-3,2-4.9,2C7.1,18,4,14.9,4,11z"></path></svg> <span class="search-command-wrapper search-command"><span class="search-command-char">⌘</span> <span class="search-command-char">K</span></span> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/data-structure/" class="vp-link nav-link">
  数据结构&amp;算法
  </a></div><div class="nav-item"><a href="/design-pattern/" class="vp-link nav-link">
  设计模式
  </a></div><div class="nav-item"><a href="/javascript/" class="vp-link nav-link">
  JavaScript
  </a></div><div class="nav-item"><a href="/frameworks/" class="vp-link nav-link">
  前端框架
  </a></div> <div class="VPNavBarAppearance appearance" data-v-19d27b0e><button type="button" aria-label="toggle dark mode" class="vt-switch vt-switch-appearance" data-v-19d27b0e><span class="vt-switch-check"><span class="vt-switch-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div> <a href="https://github.com/sicau-hsuyang/sicau-hsuyang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link"><svg width="1em" height="1em" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z" fill="currentColor"></path></svg> </a></nav></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/data-structure/" class="vp-link nav-link">
  数据结构&amp;算法
  </a></div><div class="nav-item"><a href="/design-pattern/" class="vp-link nav-link">
  设计模式
  </a></div><div class="nav-item"><a href="/javascript/" class="vp-link nav-link">
  JavaScript
  </a></div><div class="nav-item"><a href="/frameworks/" class="vp-link nav-link">
  前端框架
  </a></div> <div class="VPNavBarAppearance appearance" data-v-19d27b0e><button type="button" aria-label="toggle dark mode" class="vt-switch vt-switch-appearance" data-v-19d27b0e><span class="vt-switch-check"><span class="vt-switch-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div> <a href="https://github.com/sicau-hsuyang/sicau-hsuyang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link"><svg width="1em" height="1em" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z" fill="currentColor"></path></svg> </a></nav>  <!----> </aside> <main class="page mysql.html"> <div class="theme-default-content vp-doc content__default"><h1 id="mysql-学习笔记"><a href="#mysql-学习笔记" class="header-anchor">#</a> MySQL 学习笔记</h1> <h2 id="登录"><a href="#登录" class="header-anchor">#</a> 登录</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>mysql -u root -p -h localhost -P <span class="token number">3306</span>
</code></pre></div><h2 id="常见命令"><a href="#常见命令" class="header-anchor">#</a> 常见命令</h2> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 显示所有的数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token comment"># 选择数据库 xxx</span>
<span class="token keyword">use</span> xxx<span class="token punctuation">;</span>
<span class="token comment"># 展示数据的表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span> <span class="token keyword">from</span> xxx<span class="token punctuation">;</span>
<span class="token comment"># 显示当前所在的数据库</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查看指定表的表结构</span>
<span class="token keyword">desc</span> xxx<span class="token punctuation">;</span>
<span class="token comment"># 查看数据库的版本</span>
<span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">## 利用bash命令</span>
mysql --version<span class="token punctuation">;</span>
mysql -V<span class="token punctuation">;</span>
</code></pre></div><h2 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h2> <p>单行注释： <code>-- 注释内容</code>;（注意--后面有一个空格）
单行注释：<code>#注释内容</code>
多行注释：<code>/* 我是一个注释内容 */</code></p> <h2 id="dql-语言"><a href="#dql-语言" class="header-anchor">#</a> DQL 语言</h2> <h3 id="查询"><a href="#查询" class="header-anchor">#</a> 查询</h3> <h4 id="select"><a href="#select" class="header-anchor">#</a> select</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 从表中查询字段</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> username<span class="token punctuation">,</span>age<span class="token punctuation">,</span>gender <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> username <span class="token keyword">as</span> myName <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token comment"># 关键字区分</span>
<span class="token comment"># select NAME from employees NAME会被当做关键字，因此可以用``包起来，如。</span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>

<span class="token comment"># 查询常量值</span>
<span class="token keyword">select</span> <span class="token number">100</span>
<span class="token comment"># 查询函数</span>
<span class="token keyword">select</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查询表达式</span>
<span class="token keyword">select</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment"># 别名 as可以省略</span>
<span class="token keyword">select</span> <span class="token number">2</span><span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">as</span> <span class="token identifier"><span class="token punctuation">`</span>add<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token number">2</span><span class="token operator">/</span><span class="token number">100</span> <span class="token string">'test'</span><span class="token punctuation">;</span>

<span class="token comment"># 去重 distinct;</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>

<span class="token comment"># + 只存在数值相加的功能，但是如果是字符串和数字相加，则判断能否转化成数字型，能转就转，不能转就相当于是0</span>
<span class="token comment"># `NULL`和任何内容连接都是`NULL`</span>

</code></pre></div><h4 id="where-条件查询"><a href="#where-条件查询" class="header-anchor">#</a> where 条件查询</h4> <p>1、按条件表达式</p> <p><code>&gt; &lt; = != &lt;&gt; &gt;= &lt;=</code>等。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token number">1200</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> department_id <span class="token operator">!=</span> <span class="token number">90</span><span class="token punctuation">;</span>
</code></pre></div><p>推荐用<code>&lt;&gt;</code>代替<code>!=</code>;</p> <p>2、按逻辑表达式</p> <p><code>&amp;&amp; || ! and or not</code>等。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token number">1200</span> <span class="token operator">&amp;&amp;</span> department_id <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">&gt;=</span> <span class="token number">10000</span> <span class="token operator">&amp;&amp;</span> salary <span class="token operator">&lt;=</span> <span class="token number">15000</span><span class="token punctuation">;</span>
</code></pre></div><p>推荐用 <code>and</code>， <code>or</code>， <code>not</code>。</p> <p>3、模糊查询</p> <p><code>like; between and; in; is null; is not null</code>等。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">between</span> <span class="token number">12000</span> <span class="token operator">and</span> <span class="token number">15000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> commission_pct <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token operator">and</span> first_name <span class="token operator">like</span> <span class="token string">'%Jo%'</span><span class="token punctuation">;</span>
<span class="token comment"># 匹配员工名中第三个字符为A，第五个字符为e的员工名</span>
<span class="token keyword">select</span> last_name <span class="token keyword">as</span> lastName <span class="token keyword">from</span> employees <span class="token keyword">where</span> first_name <span class="token operator">like</span> <span class="token string">'__A_e%'</span><span class="token punctuation">;</span>
</code></pre></div><p><code>like</code>和通配符搭配使用，<code>%</code>代表匹配任意个字符（0-n），<code>_</code>代表任意单个字符</p> <p>转义字符：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 直接转义</span>
<span class="token keyword">select</span> last_name <span class="token keyword">from</span> employees <span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">'_\_%'</span><span class="token punctuation">;</span>
<span class="token comment"># 使用escape关键字转义</span>
<span class="token keyword">select</span> last_name <span class="token keyword">from</span> employees <span class="token keyword">where</span> last_name <span class="token operator">like</span> <span class="token string">'_$_%'</span> <span class="token keyword">escape</span> <span class="token string">'$'</span><span class="token punctuation">;</span>
</code></pre></div><p><code>(not) between and</code>，包含左右的临界值，但是必须是左大右小。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'IT_PORT'</span><span class="token punctuation">,</span> <span class="token string">'AD_VP'</span><span class="token punctuation">,</span> <span class="token string">'AD_PRES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>in</code> 列表的内容的值类型必须一致或兼容。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> commission_pct <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre></div><p><code>is null</code> 或者 <code>is not null</code> 可以判断<code>NULL</code>，但是，<code>=</code>，<code>!=</code>，<code>&lt;&gt;</code>不能判断<code>NULL</code>;</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> commission_pct <span class="token operator">&lt;=&gt;</span> <span class="token number">12000</span><span class="token punctuation">;</span>
</code></pre></div><p>安全等于: <code>&lt;=&gt;</code>，既可以判断<code>NULL</code>，又可以判断普通数值。</p> <h4 id="排序-order-by"><a href="#排序-order-by" class="header-anchor">#</a> 排序 order by</h4> <p><code>asc</code> 升序，<code>desc</code>降序，不写默认<code>asc</code>;</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary<span class="token operator">&gt;</span><span class="token number">12000</span> <span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary<span class="token operator">&lt;</span><span class="token number">12000</span> <span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token comment"># 按年薪的高低显示员工的信息和年薪</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> year_salary <span class="token keyword">from</span> employees <span class="token keyword">order</span> <span class="token keyword">by</span> year_salary <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token comment"># 按函数排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> salary <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>IFNULL<span class="token punctuation">(</span>commission_pct<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> year_salary <span class="token keyword">from</span> employees <span class="token keyword">order</span> <span class="token keyword">by</span> LENGTH<span class="token punctuation">(</span>last_name<span class="token punctuation">)</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token comment"># 多关键字排序，多个关键字之间用逗号隔开，先按工资排序，再按编号排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">order</span> <span class="token keyword">by</span> salary <span class="token keyword">desc</span><span class="token punctuation">,</span> employee_id <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="常见函数"><a href="#常见函数" class="header-anchor">#</a> 常见函数</h4> <p>字符串函数：</p> <p><code>LENGTH</code>：求字符串的长度。
<code>CONCAT</code>：将字符串进行连接。
<code>UPPER</code>：将字符串转大写。
<code>LOWER</code>：将字符串转小写。
<code>SUBSTR</code>：取指定位置的子字符串，
<code>INSTR</code>（和<code>JS</code>的<code>indexOf</code>类似）。
<code>TRIM</code>：消除字符串左右的空格。
<code>LPAD</code>：在字符串的左边填充指定的字符。
<code>RPAD</code>：在字符串的右边填充指定的字符。
<code>REPLACE</code>：将指定的字符替换。</p> <p>注意：索引从<code>1</code>开始。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'%char%'</span><span class="token punctuation">;</span>
</code></pre></div><p>数学函数：</p> <p><code>ROUND</code>：四舍五入；
<code>CEIL</code>：向上取整；
<code>FLOOR</code>：向下取整；
<code>truncate</code>：小数点保留 N 位有效数字；
<code>MOD</code>：取余；</p> <p>日期函数：</p> <p><code>NOW</code>：返回系统当前的时间；
<code>CURDATE</code>：返回系统当前的日期，不包含时分秒。
<code>CURTIME</code>：返回系统当前的时间，不包含年月日。
<code>YEAR</code>：返回系统当前的年份。
<code>MONTH</code>：返回系统当前的月份。
<code>MONTHNAME</code>：返回系统当前月份的名称，如<code>November</code>。
...
<code>DATE_FORMATE</code>：将日期转换成字符。
<code>STR_TO_DATE</code>：将字符串转换成日期。</p> <p>其它函数：</p> <p><code>VERSION</code>：返回数据库的版本。
<code>DATABASE</code>：返回当前使用的数据库。
<code>USER</code>：返回当前登录的用户。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> STR_TO_DATE<span class="token punctuation">(</span><span class="token string">'9-12-1994'</span><span class="token punctuation">,</span><span class="token string">'%m-%d-%y'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> DATE_FORMAT<span class="token punctuation">(</span><span class="token string">'2022-10-10'</span><span class="token punctuation">,</span> <span class="token string">'%y年%m月%d日'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>格式符</th> <th>功能</th></tr></thead> <tbody><tr><td>%Y</td> <td>四位的年份</td></tr> <tr><td>%y</td> <td>2 位的年份</td></tr> <tr><td>%m</td> <td>月份, 01,02,03,04,05,06,07,08,09,10,11,12</td></tr> <tr><td>%c</td> <td>月份, 1,2,3,4,5,6,7,8,9,10,11,12</td></tr> <tr><td>%d</td> <td>月份, 1,2,3,4,5,6,7,8,9,10,11,12</td></tr> <tr><td>%H</td> <td>小时，24 小时制</td></tr> <tr><td>%h</td> <td>小时，12 小时制</td></tr> <tr><td>%i</td> <td>分钟，01-59</td></tr> <tr><td>%s</td> <td>秒，01-59</td></tr></tbody></table> <p>流程控制函数：</p> <p><code>IFNULL</code>：
<code>IF</code>：<code>IF(exp1, exp2, exp3)</code>，如果<code>exp1</code>成立返回<code>exp2</code>，否则返回<code>exp3</code>。
<code>CASE</code>：</p> <p>case 表达式
when 常量 1 then 值或语句 1
when 常量 2 then 值或语句 2
when 常量 3 then 值或语句 3
(else 值或语句)
end</p> <p>case
when 条件 1 then 值或语句 1
when 条件 2 then 值或语句 2
when 条件 3 then 值或语句 3
(else 值或语句)
end</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> salary<span class="token punctuation">,</span> department_id<span class="token punctuation">,</span> <span class="token keyword">case</span> department_id <span class="token keyword">when</span> <span class="token number">30</span> <span class="token keyword">then</span> salary <span class="token operator">*</span> <span class="token number">1.1</span> <span class="token keyword">when</span> <span class="token number">50</span> <span class="token keyword">then</span> salary <span class="token operator">*</span> <span class="token number">1.2</span> <span class="token keyword">else</span> salary <span class="token keyword">end</span> <span class="token keyword">as</span> new_salary <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre></div><p>聚合函数：</p> <p><code>MAX</code>：求最大值
<code>MIN</code>：求最小值
<code>SUM</code>：求和
<code>AVG</code>：求平均值
<code>COUNT</code>：统计</p> <p><code>sum</code>和<code>avg</code>一般用于数值处理；<code>max</code>，<code>min</code>，<code>count</code>可以处理任何类型；</p> <p><code>sum</code>、<code>avg</code>、<code>count</code>、<code>min</code>、<code>max</code>都将会忽略<code>NULL</code>。</p> <p>可以和<code>distinct</code>搭配，如：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre></div><p><code>COUNT</code>函数的详细介绍，用于统计行数，如：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 用于统计行数</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">;</span>
</code></pre></div><p>在<code>MYISAM</code>引擎下，<code>count(*)</code>的效率高，在<code>INNODB</code>引擎下，<code>COUNT(1)</code>和<code>COUNT(*)</code>差不多，但是要比<code>COUNT(字段名)</code>要高。</p> <h4 id="group-by"><a href="#group-by" class="header-anchor">#</a> group by</h4> <p><strong>和分组函数一同查询的字段要求是<code>group by</code>后的字段</strong>
伪代码如：</p> <div class="language-text extra-class"><pre class="language-text"><code>select column, group_function(column) from xxx_table [where condition] [group by group_by_expression] [order by column];
</code></pre></div><p>例如：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> job_id <span class="token keyword">from</span> employees <span class="token keyword">group</span> <span class="token keyword">by</span> job_id<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> location_id <span class="token keyword">from</span> departments <span class="token keyword">group</span> <span class="token keyword">by</span> location_id<span class="token punctuation">;</span>
</code></pre></div><p><code>where</code>一定在<code>group by</code>之前，<code>order by</code>一定在最后。</p> <p>使用<code>having</code>关键字用于添加分组后的筛选：如查询部门员工数大于 2 的部门 id</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> department_id <span class="token keyword">from</span> employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p>分组查询筛选，分为两类，一是分组前筛选，使用<code>where</code>（原始表数据），一类是分组后筛选，使用<code>having</code>（分组之后的结果集），<strong>如果是使用分组函数做条件的话，那么肯定是放在<code>having</code>子句中，能用分组前作筛选的，就优先考虑使用分组前筛选</strong>，<code>group by</code>字句支持单个或多个字段进行分组，若采用多个字段分组，则字段之间需要使用<code>,</code>分隔，无顺序要求。</p> <h4 id="连接查询"><a href="#连接查询" class="header-anchor">#</a> 连接查询</h4> <p>笛卡尔积的错误情况：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 假设输出12行</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> boys<span class="token punctuation">;</span>
<span class="token comment"># 假设输出4行</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> beauty<span class="token punctuation">;</span>
<span class="token comment"># 最终结果 4*12行</span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>boyName<span class="token punctuation">`</span></span> <span class="token keyword">from</span> beauty<span class="token punctuation">,</span> boys<span class="token punctuation">;</span>
</code></pre></div><p>笛卡尔积的现象：表 1 有 m 行，表 2 有 n 行，结果 m*n 行，是因为没有有效的连接；</p> <pre>分类:
  内连接
    等值连接
    非等值连接
    自连接
  外连接
    左外连接
    右外连接
    完全链接
  交叉连接
</pre> <p><strong>等值连接：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 两个表的顺序可以交换</span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>boyName<span class="token punctuation">`</span></span> <span class="token keyword">from</span> beauty<span class="token punctuation">,</span> boys <span class="token keyword">where</span> beauty<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> boys<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre></div><p>等值连接加上筛选，使用<code>and</code>连接。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> last_name<span class="token punctuation">,</span> department_name <span class="token keyword">from</span> employees e<span class="token punctuation">,</span> departments d <span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token operator">and</span> e<span class="token punctuation">.</span>commission_pct <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token comment"># 查询所有女朋友的个数大于2的男生</span>
<span class="token keyword">select</span> boy<span class="token punctuation">.</span>boyName<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> stat <span class="token keyword">from</span> boys <span class="token keyword">as</span> boy<span class="token punctuation">,</span> beauty <span class="token keyword">as</span> girl <span class="token keyword">where</span> girl<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> boy<span class="token punctuation">.</span>id <span class="token keyword">group</span> <span class="token keyword">by</span> boy<span class="token punctuation">.</span>boyName <span class="token keyword">having</span> stat <span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token keyword">order</span> <span class="token keyword">by</span> stat <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre></div><p>多表等值连接连接的结果为多表的交集部分，多表连接的顺序没有要求，一般需要为表起别名。</p> <p><strong>非等值连接：</strong> 即不用等号的连接查询。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> j<span class="token punctuation">.</span>grade_level <span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span> job_grades <span class="token keyword">as</span> j <span class="token keyword">where</span> e<span class="token punctuation">.</span>salary <span class="token operator">between</span> j<span class="token punctuation">.</span>lowest_sal <span class="token operator">and</span> j<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span>
</code></pre></div><p><strong>自连接：</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询员工和领导的名称</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span>e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span>m<span class="token punctuation">.</span>employee_id <span class="token keyword">as</span> parent_id<span class="token punctuation">,</span>m<span class="token punctuation">.</span>last_name <span class="token keyword">as</span> parent_last_name <span class="token keyword">from</span> employees <span class="token keyword">as</span> e<span class="token punctuation">,</span> employees <span class="token keyword">as</span> m <span class="token keyword">where</span> e<span class="token punctuation">.</span>manager_id <span class="token operator">=</span> m<span class="token punctuation">.</span>employee_id<span class="token punctuation">;</span>
</code></pre></div><p><strong>(inner) join：</strong> （查找两个表的并集）</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 查询列表 <span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> 表<span class="token number">2</span> <span class="token keyword">on</span> 连接条件 <span class="token punctuation">[</span><span class="token keyword">where</span> 字句<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span>字句<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">having</span>字句<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span> 字句<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">limit</span> 字句<span class="token punctuation">]</span>
<span class="token comment"># 查询部门人数大于10的部门名称并且按人数降序排列</span>
<span class="token keyword">SELECT</span> d<span class="token punctuation">.</span>department_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 部门人数 <span class="token keyword">from</span> employees <span class="token keyword">as</span> e <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> departments <span class="token keyword">as</span> d <span class="token keyword">on</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> d<span class="token punctuation">.</span>department_name <span class="token keyword">HAVING</span>	部门人数 <span class="token operator">&gt;</span><span class="token number">10</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 部门人数 <span class="token keyword">DESC</span><span class="token punctuation">;</span>
<span class="token comment"># 非等值连接</span>
<span class="token keyword">select</span> salary<span class="token punctuation">,</span>grade_level <span class="token keyword">from</span> employees <span class="token keyword">as</span> e <span class="token keyword">inner</span> <span class="token keyword">join</span> job_grades <span class="token keyword">as</span> g <span class="token keyword">on</span> e<span class="token punctuation">.</span>salary <span class="token operator">between</span> g<span class="token punctuation">.</span>lowest_sal <span class="token operator">and</span> g<span class="token punctuation">.</span>highest_sal<span class="token punctuation">;</span>
<span class="token comment"># 自连接</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> m<span class="token punctuation">.</span>last_name <span class="token keyword">from</span> employees <span class="token keyword">as</span> e <span class="token keyword">inner</span> <span class="token keyword">join</span> employees <span class="token keyword">as</span> m <span class="token keyword">on</span> e<span class="token punctuation">.</span>employee_id <span class="token operator">=</span> m<span class="token punctuation">.</span>manager_id<span class="token punctuation">;</span>
</code></pre></div><p><strong>outer join:</strong></p> <p>应用场景一般用于查找一个表中有，另外一个表中没有的情况，外连接的查询结果为主表中的所有记录，如果从表中有和它匹配的记录，则填充，否则填充<code>NULL</code>。
外连接查询结果=内连接结果+主表中有但从表中没有的记录。
<em>全外连接=内连接的结果+表 1 中有但表 2 中没有的结果+表 2 中有的结果但表 1 中没有的结果（即求两表的并集）</em></p> <p><strong>left outer join:</strong> 左边的是主表，右边的是从表
<strong>right outer join:</strong> 左边的是从表，右边的主表</p> <p>左外连接和右外连接交换两个表的顺序，可以实现同样的效果。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查找没有男朋友的女生列表</span>
<span class="token comment"># 最好选从表中的主键列作为筛选，因为主键列一般都是非空字段</span>
<span class="token keyword">select</span> girl<span class="token punctuation">.</span>name<span class="token punctuation">,</span> girl<span class="token punctuation">.</span>borndate <span class="token keyword">from</span> beauty <span class="token keyword">as</span> girl <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> boys <span class="token keyword">as</span> boy <span class="token keyword">on</span> girl<span class="token punctuation">.</span>boyfriend_id <span class="token operator">=</span> boy<span class="token punctuation">.</span>id <span class="token keyword">where</span> boy<span class="token punctuation">.</span>id <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>交叉链接：</strong> 即笛卡尔乘积</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> b<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> g<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> beauty <span class="token keyword">as</span> g <span class="token keyword">cross</span> <span class="token keyword">join</span> boys <span class="token keyword">as</span> b<span class="token punctuation">;</span>
<span class="token comment"># 等价于</span>
<span class="token keyword">select</span> g<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> beauty <span class="token keyword">as</span> g<span class="token punctuation">,</span> boys <span class="token keyword">as</span> b<span class="token punctuation">;</span>
</code></pre></div><h4 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h4> <p>出现在其它语句中的 select 语句。
子查询先于主查询。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询工资比`Abel`高的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> last_name <span class="token operator">=</span> <span class="token string">'Abel'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 子查询中使用分组函数</span>
<span class="token keyword">select</span> last_name<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 和`having`字句一起使用 查询最低工资大于50号部门最低工资的部门id和其最低工资</span>
<span class="token keyword">select</span> department_id<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id <span class="token keyword">having</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> department_id <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 使用IN</span>
<span class="token keyword">select</span> last_name <span class="token keyword">from</span> employees <span class="token keyword">where</span> department_id <span class="token operator">in</span> <span class="token punctuation">(</span>
   <span class="token keyword">select</span> <span class="token keyword">distinct</span> department_id <span class="token keyword">from</span> departments <span class="token keyword">where</span> location_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1400</span><span class="token punctuation">,</span> <span class="token number">1700</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 使用any或者some</span>
<span class="token comment"># 查询其它部门中比job_id为`IT_PROG`部门任一低工资的员工的员工号、姓名、job_id以及salary</span>
<span class="token keyword">select</span>  last_name<span class="token punctuation">,</span> employee_id<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">&lt;</span> <span class="token keyword">any</span><span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token keyword">distinct</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id<span class="token operator">=</span><span class="token string">'IT_PROG'</span>
<span class="token punctuation">)</span> <span class="token operator">and</span> job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span><span class="token punctuation">;</span>
<span class="token comment"># 使用all</span>
<span class="token comment"># 查询其它部门中比job_id为`IT_PROG`部门任一低工资的员工的员工号、姓名、job_id以及salary</span>
<span class="token keyword">select</span>  last_name<span class="token punctuation">,</span> employee_id<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> salary <span class="token operator">&lt;</span> <span class="token keyword">all</span><span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token keyword">distinct</span> salary <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id<span class="token operator">=</span><span class="token string">'IT_PROG'</span>
<span class="token punctuation">)</span> <span class="token operator">and</span> job_id <span class="token operator">&lt;&gt;</span> <span class="token string">'IT_PROG'</span><span class="token punctuation">;</span>
<span class="token comment"># 不常用的行子查询</span>
<span class="token comment"># 查询员工编号最小并且工资最高的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> job_id <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>job_id<span class="token punctuation">)</span> <span class="token keyword">from</span> employees
<span class="token punctuation">)</span>
<span class="token operator">and</span> salary <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">where</span> <span class="token punctuation">(</span>job_id<span class="token punctuation">,</span>salary<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>job_id<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> employees
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查询每个部门的员工个数</span>
<span class="token keyword">select</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> employees <span class="token keyword">as</span> e <span class="token keyword">where</span> e<span class="token punctuation">.</span>department_id <span class="token operator">=</span> d<span class="token punctuation">.</span>department_id
<span class="token punctuation">)</span> <span class="token keyword">as</span> 员工个数 <span class="token keyword">from</span> departments <span class="token keyword">as</span> d <span class="token keyword">having</span> 员工个数 <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">order</span> <span class="token keyword">by</span> 员工个数 <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre></div><p><code>from</code>后面字句，把一个查询结果当做表来使用</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询各个部门的平均工资对应的工资等级</span>
<span class="token keyword">select</span> ag_dep<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> g<span class="token punctuation">.</span>grade_level <span class="token keyword">from</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> ag<span class="token punctuation">,</span> department_id <span class="token keyword">from</span> employees <span class="token keyword">group</span> <span class="token keyword">by</span> department_id
<span class="token punctuation">)</span> <span class="token keyword">as</span> ag_dep <span class="token keyword">inner</span> <span class="token keyword">join</span> job_grades <span class="token keyword">as</span> g <span class="token keyword">on</span> ag_dep<span class="token punctuation">.</span>ag <span class="token operator">between</span> lowest_sal <span class="token operator">and</span> highest_sal<span class="token punctuation">;</span>
</code></pre></div><p>相关子查询(<code>exists</code>)</p> <p>语法： <code>exists</code>(完整的查询语句)，返回<code>1</code>或者<code>0</code></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查询有员工的部门名</span>
<span class="token keyword">select</span> department_name <span class="token keyword">from</span> departments <span class="token keyword">as</span> d <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employees <span class="token keyword">as</span> e <span class="token keyword">where</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 等价转换</span>
<span class="token keyword">select</span> department_name <span class="token keyword">from</span> departments <span class="token keyword">as</span> d <span class="token keyword">inner</span> <span class="token keyword">join</span> employees <span class="token keyword">as</span> e <span class="token keyword">on</span> d<span class="token punctuation">.</span>department_id <span class="token operator">=</span> e<span class="token punctuation">.</span>department_id <span class="token keyword">group</span> <span class="token keyword">by</span> d<span class="token punctuation">.</span>department_id <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment"># 查询没有女朋友的男生信息</span>
<span class="token comment"># 使用in</span>
<span class="token keyword">select</span> boy<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> boys <span class="token keyword">as</span> boy <span class="token keyword">where</span> boy<span class="token punctuation">.</span>id <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span>
  <span class="token keyword">select</span> boyfriend_id <span class="token keyword">from</span> beauty
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 使用exists</span>
<span class="token keyword">select</span> boy<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> boys <span class="token keyword">as</span> boy <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span>
  <span class="token keyword">select</span> boyfriend_id <span class="token keyword">from</span> beauty <span class="token keyword">as</span> girl <span class="token keyword">where</span> boy<span class="token punctuation">.</span>id <span class="token operator">=</span> girl<span class="token punctuation">.</span>boyfriend_id
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="dml-语言"><a href="#dml-语言" class="header-anchor">#</a> DML 语言</h2> <h2 id="ddl-语言"><a href="#ddl-语言" class="header-anchor">#</a> DDL 语言</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><div class="inner"><a href="/N/A" class="vp-link prev noop"><span>←</span>
  N/A
  <span><br> <span class="prev-link">N/A</span></span></a> <a href="/N/A" class="vp-link next noop">
  N/A
  <span>
        →
        <br> <span class="next-link">N/A</span></span></a></div></div> </main> <div class="sticker vuepress-toc"><div class="on-this-page">ON THIS PAGE</div> <div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#登录" title="登录">登录</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#常见命令" title="常见命令">常见命令</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#注释" title="注释">注释</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#dql-语言" title="DQL 语言">DQL 语言</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#查询" title="查询">查询</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#dml-语言" title="DML 语言">DML 语言</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#ddl-语言" title="DDL 语言">DDL 语言</a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cf57dc69.js" defer></script><script src="/assets/js/2.bd5c3d55.js" defer></script><script src="/assets/js/12.335d2c6e.js" defer></script><script src="/assets/js/104.b3a749b1.js" defer></script>
  </body>
</html>
