<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>最短路径 | awesome-frontend-code</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="HsuYang的个人博客，主要对于平时学习知识的理解与记录">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.8010fc19.css" as="style"><link rel="preload" href="/assets/js/app.55d3b7b7.js" as="script"><link rel="preload" href="/assets/js/2.12e8afdc.js" as="script"><link rel="preload" href="/assets/js/12.25c2f63c.js" as="script"><link rel="preload" href="/assets/js/20.69ece110.js" as="script"><link rel="prefetch" href="/assets/js/10.ee261b3f.js"><link rel="prefetch" href="/assets/js/100.98484cfe.js"><link rel="prefetch" href="/assets/js/101.d32d09df.js"><link rel="prefetch" href="/assets/js/102.590138c2.js"><link rel="prefetch" href="/assets/js/103.effc44fb.js"><link rel="prefetch" href="/assets/js/104.e57a20e2.js"><link rel="prefetch" href="/assets/js/105.4c2ba23c.js"><link rel="prefetch" href="/assets/js/106.e3e59596.js"><link rel="prefetch" href="/assets/js/107.57de522c.js"><link rel="prefetch" href="/assets/js/108.fb9c5437.js"><link rel="prefetch" href="/assets/js/109.dc1d2fea.js"><link rel="prefetch" href="/assets/js/11.8638c842.js"><link rel="prefetch" href="/assets/js/110.f4aafe98.js"><link rel="prefetch" href="/assets/js/111.8f1c6ec3.js"><link rel="prefetch" href="/assets/js/112.617b4405.js"><link rel="prefetch" href="/assets/js/113.31aa9be8.js"><link rel="prefetch" href="/assets/js/114.13c1160a.js"><link rel="prefetch" href="/assets/js/115.0211d93e.js"><link rel="prefetch" href="/assets/js/116.f919968d.js"><link rel="prefetch" href="/assets/js/117.5d8c835d.js"><link rel="prefetch" href="/assets/js/118.3e58e260.js"><link rel="prefetch" href="/assets/js/119.345fc57e.js"><link rel="prefetch" href="/assets/js/120.959392f8.js"><link rel="prefetch" href="/assets/js/121.67b5178e.js"><link rel="prefetch" href="/assets/js/122.e5c14928.js"><link rel="prefetch" href="/assets/js/123.97b2b14c.js"><link rel="prefetch" href="/assets/js/124.95cb4493.js"><link rel="prefetch" href="/assets/js/125.c564f5a2.js"><link rel="prefetch" href="/assets/js/126.eb95beb3.js"><link rel="prefetch" href="/assets/js/127.2ef1faf2.js"><link rel="prefetch" href="/assets/js/128.4ab44dd1.js"><link rel="prefetch" href="/assets/js/129.e48310dd.js"><link rel="prefetch" href="/assets/js/13.7f7122e6.js"><link rel="prefetch" href="/assets/js/130.173a9c0a.js"><link rel="prefetch" href="/assets/js/131.7c8e9ccf.js"><link rel="prefetch" href="/assets/js/132.f284e2cc.js"><link rel="prefetch" href="/assets/js/133.d15d066e.js"><link rel="prefetch" href="/assets/js/134.f415d425.js"><link rel="prefetch" href="/assets/js/135.00371f16.js"><link rel="prefetch" href="/assets/js/136.1dd822c7.js"><link rel="prefetch" href="/assets/js/137.ccd0707f.js"><link rel="prefetch" href="/assets/js/138.2d37af10.js"><link rel="prefetch" href="/assets/js/139.b03599bc.js"><link rel="prefetch" href="/assets/js/14.7c1c5f48.js"><link rel="prefetch" href="/assets/js/140.d7f7a004.js"><link rel="prefetch" href="/assets/js/141.073cdccd.js"><link rel="prefetch" href="/assets/js/142.f680bb16.js"><link rel="prefetch" href="/assets/js/143.abebf091.js"><link rel="prefetch" href="/assets/js/144.7f72744e.js"><link rel="prefetch" href="/assets/js/145.6047487b.js"><link rel="prefetch" href="/assets/js/15.108fc43e.js"><link rel="prefetch" href="/assets/js/16.b6024221.js"><link rel="prefetch" href="/assets/js/17.3c17e6ab.js"><link rel="prefetch" href="/assets/js/18.8472dfff.js"><link rel="prefetch" href="/assets/js/19.f7f73153.js"><link rel="prefetch" href="/assets/js/21.72ab2dad.js"><link rel="prefetch" href="/assets/js/22.a75f0d64.js"><link rel="prefetch" href="/assets/js/23.df8fda1a.js"><link rel="prefetch" href="/assets/js/24.f153675e.js"><link rel="prefetch" href="/assets/js/25.0a9cee06.js"><link rel="prefetch" href="/assets/js/26.487a8d6c.js"><link rel="prefetch" href="/assets/js/27.f9c3a296.js"><link rel="prefetch" href="/assets/js/28.b7f78186.js"><link rel="prefetch" href="/assets/js/29.7c2e7708.js"><link rel="prefetch" href="/assets/js/3.0a72334c.js"><link rel="prefetch" href="/assets/js/30.e6b11447.js"><link rel="prefetch" href="/assets/js/31.7370707a.js"><link rel="prefetch" href="/assets/js/32.5effe34e.js"><link rel="prefetch" href="/assets/js/33.bf6d8ce3.js"><link rel="prefetch" href="/assets/js/34.5ba2ca34.js"><link rel="prefetch" href="/assets/js/35.c60a14c6.js"><link rel="prefetch" href="/assets/js/36.3fdbe726.js"><link rel="prefetch" href="/assets/js/37.ff45f512.js"><link rel="prefetch" href="/assets/js/38.07b1dbdc.js"><link rel="prefetch" href="/assets/js/39.ef4b7625.js"><link rel="prefetch" href="/assets/js/4.4250dcdf.js"><link rel="prefetch" href="/assets/js/40.33925d2c.js"><link rel="prefetch" href="/assets/js/41.db71072f.js"><link rel="prefetch" href="/assets/js/42.a94da1f0.js"><link rel="prefetch" href="/assets/js/43.cc1e137f.js"><link rel="prefetch" href="/assets/js/44.6b1b636f.js"><link rel="prefetch" href="/assets/js/45.10f692e3.js"><link rel="prefetch" href="/assets/js/46.04a699b0.js"><link rel="prefetch" href="/assets/js/47.5862f230.js"><link rel="prefetch" href="/assets/js/48.7135ec67.js"><link rel="prefetch" href="/assets/js/49.660c2779.js"><link rel="prefetch" href="/assets/js/5.37c03ae7.js"><link rel="prefetch" href="/assets/js/50.7f7e6c04.js"><link rel="prefetch" href="/assets/js/51.97d93884.js"><link rel="prefetch" href="/assets/js/52.dd24e376.js"><link rel="prefetch" href="/assets/js/53.81a05fdd.js"><link rel="prefetch" href="/assets/js/54.8535cad3.js"><link rel="prefetch" href="/assets/js/55.32524011.js"><link rel="prefetch" href="/assets/js/56.a7e15664.js"><link rel="prefetch" href="/assets/js/57.28e7a0ce.js"><link rel="prefetch" href="/assets/js/58.cd41efab.js"><link rel="prefetch" href="/assets/js/59.2e187324.js"><link rel="prefetch" href="/assets/js/6.94d6cfd1.js"><link rel="prefetch" href="/assets/js/60.08c36763.js"><link rel="prefetch" href="/assets/js/61.0c87b240.js"><link rel="prefetch" href="/assets/js/62.7dc0921f.js"><link rel="prefetch" href="/assets/js/63.46a816b5.js"><link rel="prefetch" href="/assets/js/64.0d8e35f9.js"><link rel="prefetch" href="/assets/js/65.339bbadf.js"><link rel="prefetch" href="/assets/js/66.0b76c5d2.js"><link rel="prefetch" href="/assets/js/67.8742e8d3.js"><link rel="prefetch" href="/assets/js/68.77c843e6.js"><link rel="prefetch" href="/assets/js/69.56ae464d.js"><link rel="prefetch" href="/assets/js/7.815d37e8.js"><link rel="prefetch" href="/assets/js/70.e2f7dcf2.js"><link rel="prefetch" href="/assets/js/71.172de28e.js"><link rel="prefetch" href="/assets/js/72.75f881a1.js"><link rel="prefetch" href="/assets/js/73.6dc3c344.js"><link rel="prefetch" href="/assets/js/74.fedd034c.js"><link rel="prefetch" href="/assets/js/75.a451bcaa.js"><link rel="prefetch" href="/assets/js/76.df1223bc.js"><link rel="prefetch" href="/assets/js/77.728c0038.js"><link rel="prefetch" href="/assets/js/78.6af5e5ef.js"><link rel="prefetch" href="/assets/js/79.3cd976ee.js"><link rel="prefetch" href="/assets/js/8.982ac4c9.js"><link rel="prefetch" href="/assets/js/80.8d0eea92.js"><link rel="prefetch" href="/assets/js/81.05eef93b.js"><link rel="prefetch" href="/assets/js/82.921bfa71.js"><link rel="prefetch" href="/assets/js/83.3fe13597.js"><link rel="prefetch" href="/assets/js/84.86221a88.js"><link rel="prefetch" href="/assets/js/85.3d19b54a.js"><link rel="prefetch" href="/assets/js/86.fcdf9691.js"><link rel="prefetch" href="/assets/js/87.4f84861f.js"><link rel="prefetch" href="/assets/js/88.2809fca3.js"><link rel="prefetch" href="/assets/js/89.3fa80f55.js"><link rel="prefetch" href="/assets/js/9.f3b53d02.js"><link rel="prefetch" href="/assets/js/90.81741933.js"><link rel="prefetch" href="/assets/js/91.d09d6f1f.js"><link rel="prefetch" href="/assets/js/92.ce143d1e.js"><link rel="prefetch" href="/assets/js/93.223bd846.js"><link rel="prefetch" href="/assets/js/94.68e4fd81.js"><link rel="prefetch" href="/assets/js/95.37a8e0ab.js"><link rel="prefetch" href="/assets/js/96.1156ebcc.js"><link rel="prefetch" href="/assets/js/97.f4e875e7.js"><link rel="prefetch" href="/assets/js/98.d98d182d.js"><link rel="prefetch" href="/assets/js/99.f18dc8d1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8010fc19.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="navbar-container"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">awesome-frontend-code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="search-icon"><path d="M21.7,20.3L18,16.6c1.2-1.5,2-3.5,2-5.6c0-5-4-9-9-9c-5,0-9,4-9,9c0,5,4,9,9,9c2.1,0,4.1-0.7,5.6-2l3.7,3.7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3C22.1,21.3,22.1,20.7,21.7,20.3zM4,11c0-3.9,3.1-7,7-7c3.9,0,7,3.1,7,7c0,1.9-0.8,3.7-2,4.9c0,0,0,0,0,0s0,0,0,0c-1.3,1.3-3,2-4.9,2C7.1,18,4,14.9,4,11z"></path></svg> <span class="search-command-wrapper search-command"><span class="search-command-char">⌘</span> <span class="search-command-char">K</span></span> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/data-structure/" class="vp-link nav-link router-link-active">
  数据结构&amp;算法
  </a></div><div class="nav-item"><a href="/design-pattern/" class="vp-link nav-link">
  设计模式
  </a></div><div class="nav-item"><a href="/javascript/" class="vp-link nav-link">
  JavaScript
  </a></div><div class="nav-item"><a href="/frameworks-with-utils/" class="vp-link nav-link">
  前端框架与工具
  </a></div> <div class="VPNavBarAppearance appearance" data-v-19d27b0e><button type="button" aria-label="toggle dark mode" class="vt-switch vt-switch-appearance" data-v-19d27b0e><span class="vt-switch-check"><span class="vt-switch-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div> <a href="https://github.com/sicau-hsuyang/sicau-hsuyang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link"><svg width="1em" height="1em" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z" fill="currentColor"></path></svg> </a></nav></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/data-structure/" class="vp-link nav-link router-link-active">
  数据结构&amp;算法
  </a></div><div class="nav-item"><a href="/design-pattern/" class="vp-link nav-link">
  设计模式
  </a></div><div class="nav-item"><a href="/javascript/" class="vp-link nav-link">
  JavaScript
  </a></div><div class="nav-item"><a href="/frameworks-with-utils/" class="vp-link nav-link">
  前端框架与工具
  </a></div> <div class="VPNavBarAppearance appearance" data-v-19d27b0e><button type="button" aria-label="toggle dark mode" class="vt-switch vt-switch-appearance" data-v-19d27b0e><span class="vt-switch-check"><span class="vt-switch-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div> <a href="https://github.com/sicau-hsuyang/sicau-hsuyang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link"><svg width="1em" height="1em" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z" fill="currentColor"></path></svg> </a></nav>  <ul class="sidebar-links"><li><a href="/data-structure/" aria-current="page" class="sidebar-link">常见的数据结构和算法</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数组</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>链表</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>字符串</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>队列</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>栈</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>堆（优先队列）</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>树</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>图</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/data-structure/graph/desc.html" class="sidebar-link">图的介绍</a></li><li><a href="/data-structure/graph/dfs.html" class="sidebar-link">深度优先搜索</a></li><li><a href="/data-structure/graph/bfs.html" class="sidebar-link">广度优先搜索</a></li><li><a href="/data-structure/graph/shortest-path.html" aria-current="page" class="active sidebar-link">最短路径</a></li><li><a href="/data-structure/graph/topology-sort.html" class="sidebar-link">拓扑排序</a></li><li><a href="/data-structure/graph/minimum-spanning-tree.html" class="sidebar-link">最小生成树</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>哈希表</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>排序</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>查找</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon"><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></p> <!----></section></li></ul> </aside> <main class="page data-structuregraphshortest-path.html"> <div class="theme-default-content vp-doc content__default"><h2 id="最短路径"><a href="#最短路径" class="header-anchor">#</a> 最短路径</h2> <p>最短路径问题，这个问题几乎是我们每天必定会接触到的问题了吧。</p> <p>当你打开高德地图，输入目的地，高德地图一下就可以给你计算出来了怎么走，甚至还能让你选条件，比如途经点，用时最短，里程最短等条件。我一直感叹其中的神奇，在我没有接触<code>图</code>这章的知识的时候，想破脑袋也不知道其中的原理，但是我从未放弃过要去搞明白计算机是怎么样解决这类问题的。</p> <p>曾经我有一个朋友，他是银行职员，当时正值炎炎夏日，他需要在一周内拜访成都市区几百家客户，他来求助我，是否可以帮忙写一个程序算一下怎么安排这些客户的拜访顺序，囿于当时我的水平有限，只能遗憾的告诉他我不会啊，真实心疼他。他的这个需求其实是结合了<code>图</code>的最短路径问题和最小生成树问题的场景。</p> <p>如果你掌握了本节内容，将来和朋友们出去玩儿的时候，编程求解旅行的规划，那应该可以狠狠地秀大家一把吧；</p> <p>如果你不仅掌握了本节内容，还掌握了后面将会介绍的最小生成树问题，将来某一天大家有类似我朋友这种极端的需求的时候，一定可以帮到他哟，这就是程序员的力量，代码的魅力，加油，拿下这节知识。</p> <h3 id="无权图单源最短路"><a href="#无权图单源最短路" class="header-anchor">#</a> 无权图单源最短路</h3> <p>无权图的单源最短路问题，跟我们的<code>广度优先遍历</code>的思路非常相似，我们从起点出发，依次操作当前节点的邻接点，若其还没有处理过，则处理，并且更新起点到这个点的距离，然后还要把这个点加到我们记录的一个路径数据集里面去。重复上述操作，直到处理完图中所有的点。</p> <p>我们以这个图为例：</p> <div align="center"><img src="/graph/graph.png" width="400" alt="图"></div> <p>并且以如下表示方法表示图：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 边类
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Edge</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 边的编号
   */</span>
  name<span class="token punctuation">;</span>
  <span class="token comment">/**
   * 起始点
   * @type {Vertex}
   */</span>
  from<span class="token punctuation">;</span>
  <span class="token comment">/**
   * 终止点
   * @type {Vertex}
   */</span>
  to<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 顶点类
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 城市名称
   */</span>
  cityName<span class="token punctuation">;</span>
  <span class="token comment">/**
   * 邻接点
   */</span>
  siblings <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">cityName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cityName <span class="token operator">=</span> cityName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 图类
 */</span>
<span class="token keyword">class</span> <span class="token class-name">Graph</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 顶点集合
   * @type {Vertex[]}
   */</span>
  vertexList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 边集合
   * @type {Edge[]}
   */</span>
  edgeList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 向图中插入一个顶点
   */</span>
  <span class="token function">addVertex</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 增加边，连接from和to两个顶点
   * @param {Vertex} from
   * @param {Vertex} to
   */</span>
  <span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token parameter">from<span class="token punctuation">,</span> to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>from<span class="token punctuation">.</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">至</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token punctuation">.</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> edge <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>edgeList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>edge<span class="token punctuation">)</span><span class="token punctuation">;</span>
    from<span class="token punctuation">.</span>siblings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>
    to<span class="token punctuation">.</span>siblings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>from<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接着，根据上面的那个<code>图</code>，构建出我们想要的连接关系：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> beijing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;北京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nanjing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;南京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> guangzhou <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;广州&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shenzhen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;深圳&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hongkong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;香港&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chengdu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;成都&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> xian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;西安&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> urumchi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;乌鲁木齐&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 将城市加入到图中
 */</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>beijing<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>nanjing<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>guangzhou<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>shenzhen<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>hongkong<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>xian<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>urumchi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 建立连接关系
 */</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>beijing<span class="token punctuation">,</span> nanjing<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>beijing<span class="token punctuation">,</span> xian<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>nanjing<span class="token punctuation">,</span> guangzhou<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>guangzhou<span class="token punctuation">,</span> shenzhen<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>guangzhou<span class="token punctuation">,</span> hongkong<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>hongkong<span class="token punctuation">,</span> shenzhen<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">,</span> guangzhou<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">,</span> xian<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>urumchi<span class="token punctuation">,</span> xian<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>urumchi<span class="token punctuation">,</span> beijing<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>那么，最短路径求解算法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 单源无权图的最短路算法
 * @param {Vertex} start
 * @param {Vertex} end
 */</span>
<span class="token keyword">function</span> <span class="token function">unweightedShortestPath</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">/* 距离哈希表，用于存储开始顶点到任意节点的距离 */</span>
  <span class="token keyword">const</span> dist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* 路径哈希表，用于存储开始顶点到任意节点所经过的顶点 */</span>
  <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dist<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> vertex <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vertex<span class="token punctuation">.</span>siblings<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 取出当前正在处理的顶点的邻接点进行处理</span>
      <span class="token keyword">let</span> adjoinVertex <span class="token operator">=</span> vertex<span class="token punctuation">.</span>siblings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">/* 若adjoinVertex未被访问过 */</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> dist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>adjoinVertex<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* 将这个点到start的距离更新 */</span>
        dist<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>adjoinVertex<span class="token punctuation">,</span> dist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>vertex<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 将这个点记录在S到adjoinVertex的路径上 */</span>
        path<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>adjoinVertex<span class="token punctuation">,</span> vertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 并且将当前邻接点入队</span>
        queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>adjoinVertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 获取终点的最短路径长度</span>
  <span class="token keyword">const</span> distance <span class="token operator">=</span> dist<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 使用栈记住终点</span>
  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> preVertex <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 沿途处理从终点到起点所经过的路径</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>preVertex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>preVertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 继续向上迭代，寻找经过的顶点</span>
    preVertex <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>preVertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 经过逆序，得到了正确的路径</span>
  <span class="token keyword">let</span> via <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> city <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    via <span class="token operator">+=</span> <span class="token string">&quot;-&gt;&quot;</span> <span class="token operator">+</span> city<span class="token punctuation">.</span>cityName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> distance<span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> via<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^-&gt;)|(-&gt;$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>假设我们想求出成都到北京的最短距离，并且需要求出是怎么样达到北京的，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> distance <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">unweightedShortestPath</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">,</span> beijing<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// path 成都-&gt;西安-&gt;北京</span>
<span class="token comment">// distance 3</span>
</code></pre></div><p>下面，我们画图描述一下这个处理流程。</p> <p>首先，在开始时将<code>成都</code>入队，同时设置距离为<code>0</code>，因为我们设置了它的距离，其实际上就相当于之前我们在广度优先遍历节的时候所提到的标记当前的节点已经被处理的手段，一举两得。接着，我们把<code>成都</code>出队，准备处理它的邻接点。</p> <div align="center"><img src="/graph/chengdu.png" alt="成都"></div> <p>紧接着，我们把<code>西安</code>和<code>广州</code>入队</p> <div align="center"><img src="/graph/xian.png" alt="西安"></div> <p>接着，把<code>西安</code>出队，同时标记<code>成都</code>到<code>西安</code>的最短距离，然后将<code>西安</code>的邻接节点<code>乌鲁木齐</code>和<code>北京</code>入队。</p> <div align="center"><img src="/graph/xian-end.png" alt="西安已处理"></div> <p>接着，把<code>广州</code>出队，同时标记<code>成都</code>到<code>广州</code>的最短距离，然后将<code>广州</code>的邻接节点<code>深圳</code>、<code>香港</code>和<code>南京</code>入队。</p> <div align="center"><img src="/graph/guangzhou.png" alt="广州已处理"></div> <p>接着，把<code>乌鲁木齐</code>出队，同时标记<code>成都</code>到<code>乌鲁木齐</code>的最短距离，然后把<code>乌鲁木齐</code>的邻接节点加入队列（<strong>虽然会将其邻接点加入队列，但是因为后面其实这些邻接点并不会重复处理，为了简便起见，我们在图上就不体现其邻接节点加入队列的过程</strong>）。</p> <p><code>乌鲁木齐</code>到<code>成都</code>需要经过<code>西安</code>，已知<code>成都</code>到<code>西安</code>的距离，故可以求得<code>成都</code>到<code>乌鲁木齐</code>的距离。</p> <div align="center"><img src="/graph/urumuchi.png" alt="乌鲁木齐已处理"></div> <p>接着，把<code>北京</code>出队，同时标记<code>成都</code>到<code>北京</code>的最短距离，然后把<code>北京</code>的邻接节点加入队列，同理，邻接节点入队这个过程我们图上就没有体现了。</p> <p><code>北京</code>到<code>成都</code>需要经过<code>西安</code>，已知<code>成都</code>到<code>西安</code>的距离，故可以求得<code>成都</code>到<code>北京</code>的距离。</p> <div align="center"><img src="/graph/beijing.png" alt="北京已处理"></div> <p>同理可以求得<code>深圳</code>、<code>香港</code>、<code>南京</code>的最短距离。</p> <p>即最终结果如下：</p> <div align="center"><img src="/graph/dist.png" alt="最终结果"></div> <p>因为我们在求解过程中把经过的路径已经计算出来了，类同于链表的原理，我们可以从终点倒推到起点，便可以求得经过的节点，因为这个是一个逆序的结果，所以我们需要使用栈再次将其逆序，即可求得最终的结果。</p> <p><strong>不管是有向还是无向图，我们都可以使用上述算法求得从某个指定的开始节点到所有节点的最短路径。</strong></p> <h3 id="带权图单源最短路径算法"><a href="#带权图单源最短路径算法" class="header-anchor">#</a> 带权图单源最短路径算法</h3> <p>对于这个问题，我们还是基于上面我们使用的那个城市相对位置的例子来阐述，不过，需要引入权重。</p> <div align="center"><img src="/graph/graph-with-weight.png" alt="带权图"></div> <p>因为增加了权重，上面的表示方法也有一定的调整：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Edge</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> cost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cost <span class="token operator">=</span> cost<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 边的编号
   */</span>
  name<span class="token punctuation">;</span>
  <span class="token comment">/**
   * 起始点
   * @type {Vertex}
   */</span>
  from<span class="token punctuation">;</span>
  <span class="token comment">/**
   * 终止点
   * @type {Vertex}
   */</span>
  to<span class="token punctuation">;</span>
  <span class="token comment">/**
   * @type {number}
   */</span>
  cost<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Vertex</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">cityName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>cityName <span class="token operator">=</span> cityName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 城市名称
   */</span>
  cityName<span class="token punctuation">;</span>
  <span class="token comment">/**
   * 邻接边
   */</span>
  edges <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Graph</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 顶点列表
   */</span>
  vertexList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">addVertex</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 增加边
   * @param {Vertex} from
   * @param {Vertex} to
   * @param {number} cost
   */</span>
  <span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token parameter">from<span class="token punctuation">,</span> to<span class="token punctuation">,</span> cost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> into <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>from<span class="token punctuation">.</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">至</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token punctuation">.</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> outside <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Edge</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token punctuation">.</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">至</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>from<span class="token punctuation">.</span>cityName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 建立两个城市的指向关系</span>
    from<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>outside<span class="token punctuation">)</span><span class="token punctuation">;</span>
    to<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>into<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后，初始化数据：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br></div><pre class="language-js"><code><span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> beijing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;北京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nanjing <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;南京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> guangzhou <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;广州&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shenzhen <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;深圳&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hongkong <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;香港&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> chengdu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;成都&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> xian <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;西安&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> urumchi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vertex</span><span class="token punctuation">(</span><span class="token string">&quot;乌鲁木齐&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 将城市加入到图中
 */</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>beijing<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>nanjing<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>guangzhou<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>shenzhen<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>hongkong<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>xian<span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>urumchi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * 建立连接关系
 */</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>beijing<span class="token punctuation">,</span> nanjing<span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>beijing<span class="token punctuation">,</span> xian<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>nanjing<span class="token punctuation">,</span> guangzhou<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>guangzhou<span class="token punctuation">,</span> shenzhen<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>guangzhou<span class="token punctuation">,</span> hongkong<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>hongkong<span class="token punctuation">,</span> shenzhen<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">,</span> guangzhou<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>chengdu<span class="token punctuation">,</span> xian<span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>urumchi<span class="token punctuation">,</span> xian<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span>urumchi<span class="token punctuation">,</span> beijing<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>接下来是根据上面图的表示方法给出的对应求解的核心代码，也就是大名鼎鼎的<code>迪杰斯特拉算法</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 在图中返回未被收录顶点中dist最小者
 * @param {Graph} graph
 * @param {Map&lt;number, number&gt;} distance
 * @param {Map&lt;Vertex, boolean&gt;} collected
 * @returns {Vertex | null}
 */</span>
<span class="token keyword">function</span> <span class="token function">findMinDist</span><span class="token punctuation">(</span><span class="token parameter">graph<span class="token punctuation">,</span> distance<span class="token punctuation">,</span> collected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 返回未被收录顶点中dist最小顶点 */</span>
  <span class="token keyword">let</span> minVertex<span class="token punctuation">;</span>
  <span class="token keyword">let</span> minDist <span class="token operator">=</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> curVertex <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">/* 若curVertex未被收录，且dist.get(curVertex)更小 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>collected<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">)</span> <span class="token operator">&lt;</span> minDist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* 更新最小距离 */</span>
      minDist <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">/* 更新对应顶点 */</span>
      minVertex <span class="token operator">=</span> curVertex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 如果能够找到这样的顶点，则返回最小的距离，否则，这样的距离不存在</span>
  <span class="token keyword">return</span> minDist <span class="token operator">&lt;</span> <span class="token number">Infinity</span> <span class="token operator">?</span> minVertex <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 迪杰斯特拉算法求解最短路径
 * @param {Graph} graph
 * @param {Vertex} start
 * @returns
 */</span>
<span class="token keyword">function</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token parameter">graph<span class="token punctuation">,</span> start</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> collected <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> distance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* 先将起点收入集合 */</span>
  distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  collected<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">vertex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vertex <span class="token operator">===</span> start<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对start节点本身除外</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 找到start节点的邻接点，如果当前节点存在出度指向起点，则证明当前节点是开始节点的邻接点</span>
    <span class="token keyword">const</span> neighborEdge <span class="token operator">=</span> vertex<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span>to <span class="token operator">===</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 若存在连接的话，则按权重初试化，否则初始化为无穷大</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>neighborEdge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vertex<span class="token punctuation">,</span> neighborEdge<span class="token punctuation">.</span>cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
      path<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vertex<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vertex<span class="token punctuation">,</span> <span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* vertex为未被收录顶点中distance最小者 */</span>
    <span class="token keyword">let</span> vertex <span class="token operator">=</span> <span class="token function">findMinDist</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> distance<span class="token punctuation">,</span> collected<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 若这样的vertex不存在，流程结束 */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vertex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* 收录vertex */</span>
    collected<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vertex<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 遍历图中的每个顶点 */</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> curVertex <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">/* 若curVertex是vertex的邻接点并且未被收录 */</span>
      <span class="token keyword">const</span> linkEdge <span class="token operator">=</span> curVertex<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">edge</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> edge<span class="token punctuation">.</span>to <span class="token operator">===</span> vertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>collected<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> linkEdge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* 若有负边 */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>linkEdge <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">/* 不能正确解决，返回错误标记 */</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">/* 若收录vertex使得distance变小 */</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>vertex<span class="token punctuation">)</span> <span class="token operator">+</span> linkEdge<span class="token punctuation">.</span>cost <span class="token operator">&lt;</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">/* 更新dist */</span>
          distance<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">,</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>vertex<span class="token punctuation">)</span> <span class="token operator">+</span> linkEdge<span class="token punctuation">.</span>cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token comment">/* 更新start到curVertex的路径 */</span>
          path<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>curVertex<span class="token punctuation">,</span> vertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> distance<span class="token punctuation">,</span> path <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 根据迪杰斯特拉算法求解结果求最终的结果
 * @param {Map&lt;Vertex, number&gt;} distance
 * @param {Map&lt;Vertex, Vertex&gt;} path
 * @param {Vertex} destination
 */</span>
<span class="token keyword">function</span> <span class="token function">getShortestPath</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> distance<span class="token punctuation">,</span> destination</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>path <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> distance <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">cost</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span>destination<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> preVertex <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>preVertex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>preVertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    preVertex <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>preVertex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> via <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> cost <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    via <span class="token operator">+=</span> <span class="token string">&quot;-&gt;&quot;</span> <span class="token operator">+</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cityName<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> via<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^-&gt;)|(-&gt;$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cost <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们来分析一下<code>迪杰斯特拉算法</code>的求解过程：</p> <p>首先，将起始节点收录，然后找到它的所有邻接点，如果找的到邻接点的话，初始化该邻接点到起点的距离，并且将该邻接点更新在起始节点的路径上，<code>西安</code>和<code>广州</code>是<code>成都</code>的邻接点，因此可以得到如下图：</p> <div align="center"><img src="/graph/example/chengdu.png" alt="成都"></div> <p>接着，我们找到未收录节点中的最小的节点，经过查找，找到的是<code>广州</code>，因为发现<code>成都</code>到<code>南京</code>，<code>香港</code>，<code>深圳</code>的距离由原来的无穷大变成经过<code>广州</code>再到对应的城市，因此可以更新距离和路径，可以得到如下图：</p> <div align="center"><img src="/graph/example/guangzhou.png" alt="广州"></div> <p>接着，继续找到未收录节点中的最小节点，经过查找，找到的是<code>香港</code>，因为发现<code>成都</code>到<code>香港</code>的距离可以保持不变，其邻接点<code>深圳</code>也是处理过的，因此，仅仅需要将<code>香港</code>收录，可以得到下图：</p> <div align="center"><img src="/graph/example/hongkong.png" alt="香港"></div> <p>接着，继续找到未收录节点中的最小节点，经过查找，找到的是<code>深圳</code>，和<code>香港</code>同理，因此可以得到下图：</p> <div align="center"><img src="/graph/example/shenzhen.png" alt="深圳"></div> <p>接着，我们找到未收录节点中的最小的节点，经过查找，找到的是<code>南京</code>，因为发现<code>成都</code>到<code>北京</code>的距离由原来的无穷大变成经过<code>南京</code>再到<code>北京</code>，因此可以更新距离和路径，可以得到如下图：</p> <div align="center"><img src="/graph/example/nanjing.png" alt="南京"></div> <p>接着，我们找到未收录节点中的最小的节点，经过查找，找到的是<code>北京</code>，因为发现<code>成都</code>到<code>乌鲁木齐</code>的距离由原来的无穷大变成经过<code>北京</code>再到<code>乌鲁木齐</code>，因此可以更新距离和路径，可以得到如下图：</p> <div align="center"><img src="/graph/example/beijing.png" alt="北京"></div> <p>接着，我们找到未收录节点中的最小的节点，经过查找，找到的是<code>乌鲁木齐</code>，因为发现<code>成都</code>到<code>西安</code>的距离可以保持不变，因此可以不更新距离和路径，可以得到如下图：</p> <div align="center"><img src="/graph/example/urumuchi.png" alt="乌鲁木齐"></div> <p>接着，我们找到未收录节点中的最小的节点，经过查找，找到的是<code>西安</code>，因为发现<code>成都</code>到<code>乌鲁木齐</code>的距离可以变得更小，因此可以更新<code>成都</code>到<code>乌鲁木齐</code>距离，并且把<code>西安</code>更新到<code>成都</code>到<code>乌鲁木齐</code>的路径上，可以得到如下图：</p> <div align="center"><img src="/graph/example/xian.png" alt="西安"></div> <p>到现在，我们已经把所有的顶点都收录完成了，因此，找不到未收录的最小顶点，退出循环，程序结束。</p> <p>分析了上面的流程，我们就可以写出<code>迪杰斯特拉算法</code>的伪代码了，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/* 单源有权最短路径算法 */</span>
<span class="token keyword">function</span> <span class="token function">dijkstra</span><span class="token punctuation">(</span><span class="token parameter">vertex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  collected<span class="token punctuation">[</span>vertex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>图中所有顶点 <span class="token constant">V</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>当前 <span class="token constant">V</span> 是 vertex的邻接点<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      distance<span class="token punctuation">[</span><span class="token constant">V</span><span class="token punctuation">]</span> <span class="token operator">=</span> vertex到<span class="token constant">V</span>的权重
      把 <span class="token constant">V</span> 更新在 vertex的路径上
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      distance<span class="token punctuation">[</span><span class="token constant">V</span><span class="token punctuation">]</span> <span class="token operator">=</span> 无穷大
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    minVertex <span class="token operator">=</span> 找出未收录顶点的最小者；
    <span class="token keyword">if</span><span class="token punctuation">(</span>找不到这样的minVertex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    collected<span class="token punctuation">[</span>minVertex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>minVertex 的每个邻接点 neighborVertex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>collected<span class="token punctuation">[</span>neighborVertex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>存在负值圈<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>distance<span class="token punctuation">[</span>minVertex<span class="token punctuation">]</span> <span class="token operator">+</span> minVertex到neighborVertex的权重 <span class="token operator">&lt;</span> distance<span class="token punctuation">[</span>neighborVertex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          distance<span class="token punctuation">[</span>neighborVertex<span class="token punctuation">]</span> <span class="token operator">=</span> distance<span class="token punctuation">[</span>neighborVertex<span class="token punctuation">]</span> <span class="token operator">+</span> minVertex到neighborVertex的权重
          path<span class="token punctuation">[</span>neighborVertex<span class="token punctuation">]</span> <span class="token operator">=</span> minVertex
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到的是，<code>迪杰斯特拉算法</code>还是基于<code>广度优先</code>的思想在做的，不过神奇的是却没有用到<code>队列</code>，是基于<code>贪心算法</code>的思想，对此有兴趣的同学可以自行查阅相关资料。</p> <p>需要注意的是，<code>迪杰斯特拉算法</code>是不能解决<code>负值圈</code>的问题的，就好比，你每在那个地方兜一下，不仅不花钱，别人还要倒给你钱，只要你不断兜圈子，那这儿的权重就会变成负无穷。</p> <p>还有一个需要大家注意的问题是，对于辅助函数<code>findMinDist</code>，每次都找最小值，这个操作我们是否已经在哪儿见过了呀？很容易就联想到，<strong>可以引入<code>最小堆</code>来加快每次查找最小未收录节点的效率</strong>。</p> <p>和无权图的情况类似，<strong>不管是有向图还是无向图，都可以使用<code>迪杰斯特拉算法</code>进行求解</strong>。</p> <h3 id="带权图多源最短路径算法"><a href="#带权图多源最短路径算法" class="header-anchor">#</a> 带权图多源最短路径算法</h3> <p><code>迪杰斯特拉算法</code>解决的是单源最短路径的问题，如何求多源最短路径呢，有的朋友会说，那直接把<code>迪杰斯特拉算法</code>对每个顶点都进行一次求解就可以了啊，这个确实是可以的，但是，还可以有更高明的算法，这就是接下来要阐述的<code>弗洛伊德算法</code>。</p> <p>不幸的消息又来了，<code>弗洛伊德算法</code>是基于<code>动态规划</code>思想的，在前文我们阐述<a href="/data-structure/string/KMP.html">KMP</a>的时候提到过<code>next数组</code>的求解过程也是基于<code>动态规划</code>的，这是一个老大难问题，这方面比较小白的朋友，可以先尝试学习<a href="https://www.icourse163.org/course/PKU-1001894005?tid=1001994002" target="_blank" rel="noopener noreferrer">这门课程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，然后再回过来看这篇博客较好。</p> <p>既然是基于<code>动态规划</code>，那么就一定是存在递推关系的，接下来就看一看这个递推关系是怎么建立的。</p> <p>令：Dp<sup>k</sup>[i][j] = 路径 {i-&gt;{l&lt;=k}-&gt;j}的最小长度，和<code>迪杰斯特拉算法</code>一样，这儿只是表示已经收进到集合中的当前编号小于等于<code>k</code>的顶点从<code>i</code>到<code>j</code>的最短路径。</p> <p>那么，Dp<sup>0</sup>[i][j]，Dp<sup>1</sup>[i][j]，... Dp<sup>size-1</sup>[i][j]给出了<code>i</code>到<code>j</code>真正的最短距离，<code>size</code>为图中的顶点个数。</p> <p>当 Dp<sup>k-1</sup>[i][j]已经完成，递推到 Dp<sup>k</sup>[i][j]时，存在下面两种情况：</p> <p>如果 k∉ 最短路径{i-&gt;{l&lt;=k}-&gt;j}，则 Dp<sup>k-1</sup>[i][j] = Dp<sup>k</sup>[i][j]</p> <p>如果 k∈ 最短路径{i-&gt;{l&lt;=k}-&gt;j}，则该路径必定由两段最短路径组成，即： Dp<sup>k</sup>[i][j] = Dp<sup>k-1</sup>[i][k] + Dp<sup>k-1</sup>[k][i](最外层循环控制序列，内两层循环控制两点，所以在求 Dp<sup>k</sup>[i][j]时，一定已经求出了 Dp<sup>k-1</sup>[i][k] 和 Dp<sup>k-1</sup>[k][i])</p> <p>如果使用邻接矩阵表示<code>图</code>的话，<code>弗洛伊德算法</code>代码看起来会比较简洁，但是我们依然使用上面的那种表示方法，那么实现就如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 弗洛伊德算法
 * @param {Graph} graph
 */</span>
<span class="token keyword">function</span> <span class="token function">floyd</span><span class="token punctuation">(</span><span class="token parameter">graph</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 根据图中最大的顶点数初始化dp数组</span>
  <span class="token keyword">let</span> size <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token comment">// 初始化无穷大，为了在日后的计算中将最短距离缩小，dp[i][j]的意义就是任意两点i和j之间的最短距离</span>
  <span class="token keyword">const</span> dp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> size<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">length</span><span class="token operator">:</span> size<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 初始化为-1，代表两点之间不存在中间节点</span>
  <span class="token keyword">const</span> path <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">length</span><span class="token operator">:</span> size<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">length</span><span class="token operator">:</span> size<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 定义一个求两点之间最短路径的函数
   * @param {Vertex} start
   * @param {Vertex} end
   * @returns
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getShortestPath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">shortestPath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> k <span class="token operator">=</span> path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 如果两点之间不存在中间节点</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>cityName <span class="token operator">+</span> <span class="token string">&quot;-&gt;&quot;</span> <span class="token operator">+</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>cityName
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 从i到k的路径</span>
      <span class="token keyword">const</span> leftVia <span class="token operator">=</span> <span class="token function">shortestPath</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 从k到j的路径</span>
      <span class="token keyword">const</span> rightVia <span class="token operator">=</span> <span class="token function">shortestPath</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 因为计算途径路径的时候，多算了一个k节点，因此，需要给它替换掉</span>
      <span class="token keyword">const</span> via <span class="token operator">=</span> leftVia <span class="token operator">+</span> <span class="token string">&quot;-&gt;&quot;</span> <span class="token operator">+</span> rightVia<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\u4e00-\u9fa5]+-&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> via<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> j <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> j <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">shortestPath</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">/**
   * 定义一个求两点之间最小化肥的函数
   * @param {Vertex} start
   * @param {Vertex} end
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getShortestDistance</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> i <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> j <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v <span class="token operator">===</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 初始化dp的值，若两点之间存在边，则初始化为权重，若不存在边，则初始为无穷大</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将对角线初始化为0，因为不允许自回路</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> v1 <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 将存在邻接点的点初始化为两点之间的权重，若不存在则初始化为无穷大</span>
    v1<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">edge</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> j <span class="token operator">=</span> graph<span class="token punctuation">.</span>vertexList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">===</span> edge<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>
      dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> edge<span class="token punctuation">.</span>cost<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/**
   * 错误断言函数
   */</span>
  <span class="token keyword">const</span> <span class="token function-variable function">assertError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;存在负值圈，无法计算&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将下标为k的节点加入{i-&gt;{l&lt;=k}-&gt;j}的集合中，如果从i到k的距离和k到j的距离比当前的小，则更新i到j的最短距离，并且i和j之间的最短距离是从i到k再到k到j</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> j <span class="token operator">&amp;&amp;</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/* 若发现负值圈，不能正确解决，返回错误标记 */</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">distance</span><span class="token operator">:</span> assertError<span class="token punctuation">,</span>
              <span class="token literal-property property">path</span><span class="token operator">:</span> assertError<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// 将k更新在i和j之间，表示从i到j必须要途径k节点</span>
          path<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">distance</span><span class="token operator">:</span> getShortestDistance<span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> getShortestPath<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，我们一直都在不断地去找顶点的序号，因此，使用邻接矩阵表示的话，这个过程是可以省略的，所以代码会更简洁一些。</p> <p>上述是对于<code>动态规划</code>的理论描述，如果有同学看起来觉得困难的话，不如先看下文，然后再回过头来看理论描述。</p> <p><code>弗洛伊德算法</code>首先先求出任意两点<code>A</code>和<code>B</code>间的距离，然后两点之间加入一个新的点<code>C</code>，原来<code>A</code>和<code>B</code>的距离是否能够被<code>A+C</code>和<code>B+C</code>替换（这就好比把一段线段逐渐打成由几个线段组成的一个过程）。</p> <p>最外层的循环<code>k</code>其实控制的是对于开始节点<code>i</code>和结束节点<code>j</code>，加入新的节点的个数，随着节点不断地被加入，便可以不断的优化<code>i</code>到<code>j</code>之间的最短距离，最终解出两点之间的最短距离。</p> <p>比如我们求<code>成都</code>到<code>北京</code>的距离，首先，我们已知<code>北京</code>到<code>西安</code>，<code>西安</code>到<code>成都</code>，<code>南京</code>到<code>北京</code>，<code>南京</code>到<code>广州</code>，<code>广州</code>到<code>成都</code>等城市之间的距离。</p> <p>首先将<code>北京</code>和<code>成都</code>不存在邻接关系，因此两者之间的距离初始化为正无穷，假设现在我们加入<code>深圳</code>，对<code>北京</code>到<code>成都</code>的距离没有影响（别的城市距离有影响，但我们现在只阐述<code>北京</code>到<code>成都</code>，后续将不再赘述），接着加入<code>南京</code>，可以将<code>北京</code>到<code>广州</code>的距离更新为 50，紧接着，我们加入<code>乌鲁木齐</code>，对于<code>北京</code>到<code>成都</code>的距离没有影响，接着我们加入<code>西安</code>，此时<code>北京</code>到<code>成都</code>的距离可以更新为 1120，假设现在我们加入<code>广州</code>，<code>成都</code>到<code>北京</code>的距离可以更新为 100，后面，我们再加入<code>香港</code>，对于<code>北京</code>到<code>成都</code>的距离已经没有影响了，因此，<code>北京</code>到<code>成都</code>的距离就求解完毕了。</p> <p>由于这是一个动态的过程，每时每刻都在求以<code>k</code>个顶点为集合中的任意两点间距离，当所有的顶点都加入完毕的时候，就可以求得所有的任意两点间的距离。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><div class="inner"><a href="/data-structure/graph/bfs.html" class="vp-link prev"><span>←</span>
  广度优先搜索
  <span><br> <span class="prev-link">/data-structure/graph/bfs.html</span></span></a> <a href="/data-structure/graph/topology-sort.html" class="vp-link next">
  拓扑排序
  <span>
        →
        <br> <span class="next-link">/data-structure/graph/topology-sort.html</span></span></a></div></div> </main> <div class="sticker vuepress-toc"><div class="on-this-page">ON THIS PAGE</div> <div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#最短路径" title="最短路径">最短路径</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#无权图单源最短路" title="无权图单源最短路">无权图单源最短路</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#带权图单源最短路径算法" title="带权图单源最短路径算法">带权图单源最短路径算法</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#带权图多源最短路径算法" title="带权图多源最短路径算法">带权图多源最短路径算法</a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.55d3b7b7.js" defer></script><script src="/assets/js/2.12e8afdc.js" defer></script><script src="/assets/js/12.25c2f63c.js" defer></script><script src="/assets/js/20.69ece110.js" defer></script>
  </body>
</html>
