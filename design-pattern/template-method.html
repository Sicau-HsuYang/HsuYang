<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模板方法模式 | awesome-frontend-code</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="HsuYang的个人博客，主要对于平时学习知识的理解与记录">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/assets/css/0.styles.12a4a304.css" as="style"><link rel="preload" href="/assets/js/app.64b517d5.js" as="script"><link rel="preload" href="/assets/js/2.bd5c3d55.js" as="script"><link rel="preload" href="/assets/js/12.335d2c6e.js" as="script"><link rel="preload" href="/assets/js/82.fbaef3d6.js" as="script"><link rel="prefetch" href="/assets/js/10.1d827b7f.js"><link rel="prefetch" href="/assets/js/100.f1c02d3c.js"><link rel="prefetch" href="/assets/js/101.67579f2c.js"><link rel="prefetch" href="/assets/js/102.79fc91c5.js"><link rel="prefetch" href="/assets/js/103.55c12370.js"><link rel="prefetch" href="/assets/js/104.93a3a68c.js"><link rel="prefetch" href="/assets/js/105.8ad9ca42.js"><link rel="prefetch" href="/assets/js/106.9f97e19e.js"><link rel="prefetch" href="/assets/js/107.e44f638a.js"><link rel="prefetch" href="/assets/js/108.7b668711.js"><link rel="prefetch" href="/assets/js/109.665b98e4.js"><link rel="prefetch" href="/assets/js/11.552da99d.js"><link rel="prefetch" href="/assets/js/110.ff6cc189.js"><link rel="prefetch" href="/assets/js/111.2b4e7317.js"><link rel="prefetch" href="/assets/js/112.340d50e2.js"><link rel="prefetch" href="/assets/js/113.9ba6a87a.js"><link rel="prefetch" href="/assets/js/114.491c6f4b.js"><link rel="prefetch" href="/assets/js/115.25cf4085.js"><link rel="prefetch" href="/assets/js/116.116219a9.js"><link rel="prefetch" href="/assets/js/117.a8eb0c40.js"><link rel="prefetch" href="/assets/js/118.02b90a55.js"><link rel="prefetch" href="/assets/js/119.7ac65258.js"><link rel="prefetch" href="/assets/js/120.723cc6be.js"><link rel="prefetch" href="/assets/js/121.6b266027.js"><link rel="prefetch" href="/assets/js/122.8b76e937.js"><link rel="prefetch" href="/assets/js/123.a8cb6483.js"><link rel="prefetch" href="/assets/js/124.7ca448a0.js"><link rel="prefetch" href="/assets/js/125.6f0ca736.js"><link rel="prefetch" href="/assets/js/126.442bd21f.js"><link rel="prefetch" href="/assets/js/127.96b27113.js"><link rel="prefetch" href="/assets/js/128.0fa36789.js"><link rel="prefetch" href="/assets/js/129.275a3738.js"><link rel="prefetch" href="/assets/js/13.f0b73018.js"><link rel="prefetch" href="/assets/js/130.3806d153.js"><link rel="prefetch" href="/assets/js/131.7570573f.js"><link rel="prefetch" href="/assets/js/132.29f0cc3a.js"><link rel="prefetch" href="/assets/js/133.ca7e9a3b.js"><link rel="prefetch" href="/assets/js/134.57ea6444.js"><link rel="prefetch" href="/assets/js/135.6a5b2465.js"><link rel="prefetch" href="/assets/js/14.5923c42d.js"><link rel="prefetch" href="/assets/js/15.bf034643.js"><link rel="prefetch" href="/assets/js/16.20d55366.js"><link rel="prefetch" href="/assets/js/17.fa1aa0db.js"><link rel="prefetch" href="/assets/js/18.ebb6c964.js"><link rel="prefetch" href="/assets/js/19.a274cf0a.js"><link rel="prefetch" href="/assets/js/20.aa694a5f.js"><link rel="prefetch" href="/assets/js/21.38dfa427.js"><link rel="prefetch" href="/assets/js/22.c3042863.js"><link rel="prefetch" href="/assets/js/23.fa355830.js"><link rel="prefetch" href="/assets/js/24.ad6e2564.js"><link rel="prefetch" href="/assets/js/25.20fd2423.js"><link rel="prefetch" href="/assets/js/26.efa5e439.js"><link rel="prefetch" href="/assets/js/27.685d7487.js"><link rel="prefetch" href="/assets/js/28.0c81075d.js"><link rel="prefetch" href="/assets/js/29.c2c4ae11.js"><link rel="prefetch" href="/assets/js/3.3e573604.js"><link rel="prefetch" href="/assets/js/30.118d6495.js"><link rel="prefetch" href="/assets/js/31.8b4bdb1c.js"><link rel="prefetch" href="/assets/js/32.b80c53fe.js"><link rel="prefetch" href="/assets/js/33.d3622d58.js"><link rel="prefetch" href="/assets/js/34.51cf2ac0.js"><link rel="prefetch" href="/assets/js/35.35936adb.js"><link rel="prefetch" href="/assets/js/36.29bcb04e.js"><link rel="prefetch" href="/assets/js/37.ab9d6370.js"><link rel="prefetch" href="/assets/js/38.08ede194.js"><link rel="prefetch" href="/assets/js/39.ae9cb35c.js"><link rel="prefetch" href="/assets/js/4.7cc47491.js"><link rel="prefetch" href="/assets/js/40.0950cd0c.js"><link rel="prefetch" href="/assets/js/41.2e32f037.js"><link rel="prefetch" href="/assets/js/42.80931c1e.js"><link rel="prefetch" href="/assets/js/43.7071670b.js"><link rel="prefetch" href="/assets/js/44.f1962fc5.js"><link rel="prefetch" href="/assets/js/45.1962a845.js"><link rel="prefetch" href="/assets/js/46.6702759c.js"><link rel="prefetch" href="/assets/js/47.ba53e15e.js"><link rel="prefetch" href="/assets/js/48.d73c591f.js"><link rel="prefetch" href="/assets/js/49.de4724eb.js"><link rel="prefetch" href="/assets/js/5.582876a0.js"><link rel="prefetch" href="/assets/js/50.498afe33.js"><link rel="prefetch" href="/assets/js/51.4310bcf3.js"><link rel="prefetch" href="/assets/js/52.6d7a5b2f.js"><link rel="prefetch" href="/assets/js/53.e7a43225.js"><link rel="prefetch" href="/assets/js/54.7912e016.js"><link rel="prefetch" href="/assets/js/55.bc72294f.js"><link rel="prefetch" href="/assets/js/56.270c2ce6.js"><link rel="prefetch" href="/assets/js/57.571b8eb9.js"><link rel="prefetch" href="/assets/js/58.18a47657.js"><link rel="prefetch" href="/assets/js/59.5891ae73.js"><link rel="prefetch" href="/assets/js/6.dc7ce79d.js"><link rel="prefetch" href="/assets/js/60.1cf0dce5.js"><link rel="prefetch" href="/assets/js/61.e2bc512f.js"><link rel="prefetch" href="/assets/js/62.a30d3c54.js"><link rel="prefetch" href="/assets/js/63.2adda87a.js"><link rel="prefetch" href="/assets/js/64.4617d1f5.js"><link rel="prefetch" href="/assets/js/65.a43d6e4f.js"><link rel="prefetch" href="/assets/js/66.f986a325.js"><link rel="prefetch" href="/assets/js/67.0a7ba30a.js"><link rel="prefetch" href="/assets/js/68.815db5ab.js"><link rel="prefetch" href="/assets/js/69.fe14be17.js"><link rel="prefetch" href="/assets/js/7.2cf2e5f8.js"><link rel="prefetch" href="/assets/js/70.e9479753.js"><link rel="prefetch" href="/assets/js/71.fe5f549d.js"><link rel="prefetch" href="/assets/js/72.f02d050b.js"><link rel="prefetch" href="/assets/js/73.a42de0ca.js"><link rel="prefetch" href="/assets/js/74.20fed6bb.js"><link rel="prefetch" href="/assets/js/75.ac48c43f.js"><link rel="prefetch" href="/assets/js/76.0860c80c.js"><link rel="prefetch" href="/assets/js/77.a9a551e8.js"><link rel="prefetch" href="/assets/js/78.0a3e7f5f.js"><link rel="prefetch" href="/assets/js/79.d9d66131.js"><link rel="prefetch" href="/assets/js/8.22334717.js"><link rel="prefetch" href="/assets/js/80.2c77beda.js"><link rel="prefetch" href="/assets/js/81.bf2737ec.js"><link rel="prefetch" href="/assets/js/83.f446a77c.js"><link rel="prefetch" href="/assets/js/84.f13d31dd.js"><link rel="prefetch" href="/assets/js/85.9a5f33d8.js"><link rel="prefetch" href="/assets/js/86.65e4fb64.js"><link rel="prefetch" href="/assets/js/87.611595e8.js"><link rel="prefetch" href="/assets/js/88.523f04e7.js"><link rel="prefetch" href="/assets/js/89.cc543f6f.js"><link rel="prefetch" href="/assets/js/9.5ae7e045.js"><link rel="prefetch" href="/assets/js/90.b6ba16cd.js"><link rel="prefetch" href="/assets/js/91.0c8a9981.js"><link rel="prefetch" href="/assets/js/92.b3437e34.js"><link rel="prefetch" href="/assets/js/93.6a2bdf02.js"><link rel="prefetch" href="/assets/js/94.432f2a0b.js"><link rel="prefetch" href="/assets/js/95.47ea125f.js"><link rel="prefetch" href="/assets/js/96.be5d03d3.js"><link rel="prefetch" href="/assets/js/97.db9b7d67.js"><link rel="prefetch" href="/assets/js/98.601bb91c.js"><link rel="prefetch" href="/assets/js/99.4752bb35.js">
    <link rel="stylesheet" href="/assets/css/0.styles.12a4a304.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="navbar-container"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">awesome-frontend-code</span></a> <div class="links"><div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="search-icon"><path d="M21.7,20.3L18,16.6c1.2-1.5,2-3.5,2-5.6c0-5-4-9-9-9c-5,0-9,4-9,9c0,5,4,9,9,9c2.1,0,4.1-0.7,5.6-2l3.7,3.7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3C22.1,21.3,22.1,20.7,21.7,20.3zM4,11c0-3.9,3.1-7,7-7c3.9,0,7,3.1,7,7c0,1.9-0.8,3.7-2,4.9c0,0,0,0,0,0s0,0,0,0c-1.3,1.3-3,2-4.9,2C7.1,18,4,14.9,4,11z"></path></svg> <span class="search-command-wrapper search-command"><span class="search-command-char">⌘</span> <span class="search-command-char">K</span></span> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/data-structure/" class="vp-link nav-link">
  数据结构&amp;算法
  </a></div><div class="nav-item"><a href="/design-pattern/" class="vp-link nav-link router-link-active">
  设计模式
  </a></div><div class="nav-item"><a href="/javascript/" class="vp-link nav-link">
  JavaScript
  </a></div><div class="nav-item"><a href="/frameworks/" class="vp-link nav-link">
  前端框架
  </a></div> <div class="VPNavBarAppearance appearance" data-v-19d27b0e><button type="button" aria-label="toggle dark mode" class="vt-switch vt-switch-appearance" data-v-19d27b0e><span class="vt-switch-check"><span class="vt-switch-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div> <a href="https://github.com/sicau-hsuyang/sicau-hsuyang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link"><svg width="1em" height="1em" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z" fill="currentColor"></path></svg> </a></nav></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/data-structure/" class="vp-link nav-link">
  数据结构&amp;算法
  </a></div><div class="nav-item"><a href="/design-pattern/" class="vp-link nav-link router-link-active">
  设计模式
  </a></div><div class="nav-item"><a href="/javascript/" class="vp-link nav-link">
  JavaScript
  </a></div><div class="nav-item"><a href="/frameworks/" class="vp-link nav-link">
  前端框架
  </a></div> <div class="VPNavBarAppearance appearance" data-v-19d27b0e><button type="button" aria-label="toggle dark mode" class="vt-switch vt-switch-appearance" data-v-19d27b0e><span class="vt-switch-check"><span class="vt-switch-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-sun"><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path> <path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path> <path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path> <path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path> <path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path> <path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path> <path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path> <path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path> <path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="vt-switch-appearance-moon"><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg></span></span></button></div> <a href="https://github.com/sicau-hsuyang/sicau-hsuyang.github.io.git" target="_blank" rel="noopener noreferrer" class="repo-link"><svg width="1em" height="1em" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2z" fill="currentColor"></path></svg> </a></nav>  <ul class="sidebar-links"><li><a href="/design-pattern/" aria-current="page" class="sidebar-link">面向对象设计原则&amp;设计模式</a></li><li><a href="/design-pattern/singleton.html" class="sidebar-link">单例模式</a></li><li><a href="/design-pattern/factory.html" class="sidebar-link">工厂模式</a></li><li><a href="/design-pattern/command.html" class="sidebar-link">命令模式</a></li><li><a href="/design-pattern/proxy.html" class="sidebar-link">代理模式</a></li><li><a href="/design-pattern/template-method.html" aria-current="page" class="active sidebar-link">模板方法模式</a></li><li><a href="/design-pattern/watcher.html" class="sidebar-link">观察者模式</a></li><li><a href="/design-pattern/bridge.html" class="sidebar-link">桥接模式</a></li><li><a href="/design-pattern/adaptor.html" class="sidebar-link">适配器模式</a></li><li><a href="/design-pattern/decorator.html" class="sidebar-link">装饰模式</a></li><li><a href="/design-pattern/strategy.html" class="sidebar-link">策略模式</a></li><li><a href="/design-pattern/flyweight.html" class="sidebar-link">享元模式</a></li><li><a href="/design-pattern/mediator.html" class="sidebar-link">中介者模式</a></li><li><a href="/design-pattern/state.html" class="sidebar-link">状态模式</a></li><li><a href="/design-pattern/responsibility-chain.html" class="sidebar-link">职责链模式</a></li></ul> </aside> <main class="page design-patterntemplate-method.html"> <div class="theme-default-content vp-doc content__default"><h2 id="模板方法模式"><a href="#模板方法模式" class="header-anchor">#</a> 模板方法模式</h2> <h3 id="_1、基本概念"><a href="#_1、基本概念" class="header-anchor">#</a> 1、基本概念</h3> <p>模板方法模式是一个十分简单且容易掌握的设计模式，如果你在之前没有看过设计模式相关的知识点，但是在大学的课程中，面向对象编程的基本功非常扎实，你可能不由自主的就掌握了这个设计模式。</p> <p>模板方法模式是一个基于继承的设计模式，它的核心思路很简单，将一些抽象化的操作抽离到基类中，将一些不太容易抽象的操作交给子类根据对应的业务实现，利用了多态的特性，从而实现代码复用。</p> <p>尤其是在前几年<code>React Hook</code>没出现的时候，当时还需要用<code>class</code>编写类组件，使用模板方法模式将一些抽象的渲染内容（或公共的内容）父类渲染，子类继承父类，然后根据对应的业务重写父类的某些方法（又有点儿像<code>Vue</code>的插槽），开发效率相当高。</p> <p>虽然模板方法模式是基于继承的设计模式，在<code>ES6</code>的<code>class</code>出现之前，仍然在实际开发中常用，而且，模板方法模式往往可以和很多设计模式结合使用（如：<code>工厂模式</code>，<code>命令模式</code>，<code>状态模式</code>，<code>职责链模式</code>，<code>策略模式</code>等）。</p> <p>现如今的<code>JavaScript</code>已经拥抱了函数式编程，模板方法模式在使用框架编写业务代码时可能应用的场景会相对较少一些了，但是如果你开发一些库的话，这个设计模式是一个你不得不掌握的设计模式。</p> <p>模板方法模式的<code>UML</code>结构图如下：</p> <div align="center"><img src="/design-pattern/template-method-pattern.png" alt="模板方法模式"></div> <h3 id="_2、代码范式"><a href="#_2、代码范式" class="header-anchor">#</a> 2、代码范式</h3> <p>以下是基于一个股票交易场景给出的一个实现方式，由于科创板和创业板有资产的限制，因此，将验证方法抽离到子类</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">ContractTransaction</span> <span class="token punctuation">{</span>
  <span class="token function">validVolume</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num <span class="token operator">%</span> <span class="token number">100</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">validTransactionTime</span><span class="token punctuation">(</span>time<span class="token operator">:</span> Date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> am <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">9.5</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">11.5</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pm <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">13</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> tick <span class="token operator">=</span>
      <span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3600</span> <span class="token operator">+</span> time<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">+</span> time<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span>
        <span class="token number">1000</span> <span class="token operator">+</span>
      time<span class="token punctuation">.</span><span class="token function">getMilliseconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>tick <span class="token operator">&gt;=</span> am<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> tick <span class="token operator">&lt;=</span> am<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>tick <span class="token operator">&gt;=</span> pm<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> tick <span class="token operator">&lt;=</span> pm<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">abstract</span> <span class="token function">validContractRestrict</span><span class="token punctuation">(</span>stockCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> assets<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

  <span class="token function">buy</span><span class="token punctuation">(</span>stockCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> volume<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> assets<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validTransactionTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&quot;2023/04/07 10:00:00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;非交易时间，无法交易&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validVolume</span><span class="token punctuation">(</span>volume<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;买卖数量必须是100的整数&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">validContractRestrict</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">,</span> assets<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;因您的资产限制，无法买卖当前合约&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">您已成功买入合约：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stockCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，数量：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>volume<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ShangHaiContractTransaction</span> <span class="token keyword">extends</span> <span class="token class-name">ContractTransaction</span> <span class="token punctuation">{</span>
  <span class="token function">validContractRestrict</span><span class="token punctuation">(</span>stockCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> assets<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(SHSE)?688</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(SHSE)?688</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> assets <span class="token operator">&gt;=</span> <span class="token number">500000</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ShenzhenContractTansaction</span> <span class="token keyword">extends</span> <span class="token class-name">ContractTransaction</span> <span class="token punctuation">{</span>
  <span class="token function">validContractRestrict</span><span class="token punctuation">(</span>stockCode<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> assets<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(SZSE)?30</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(SZSE)?30</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> assets <span class="token operator">&gt;=</span> <span class="token number">100000</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getTransactionStrategy</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">)</span><span class="token operator">:</span> ContractTransaction <span class="token punctuation">{</span>
  <span class="token keyword">let</span> stg<span class="token operator">:</span> ContractTransaction<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(SHSE)?6</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>stockCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShangHaiContractTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    stg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ShenzhenContractTansaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> stg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">bootstrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> stocks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;6000036&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;688688&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;002230&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;300059&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  stocks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> stg <span class="token operator">=</span> <span class="token function">getTransactionStrategy</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stg<span class="token punctuation">.</span><span class="token function">buy</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 您已成功买入合约：6000036，数量：200</span>
  <span class="token comment">// 因您的资产限制，无法买卖当前合约</span>
  <span class="token comment">// 您已成功买入合约：002230，数量：800</span>
  <span class="token comment">// 因您的资产限制，无法买卖当前合约</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对于<code>JS</code>中，如果需要抽象类，可以使用如下形式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SomeClass</span> <span class="token punctuation">{</span>
  <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;this method must be implemented by sub-class&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3、在前端开发中的实践"><a href="#_3、在前端开发中的实践" class="header-anchor">#</a> 3、在前端开发中的实践</h3> <p>在前端开发中，模板方法模式应用场景太多了，凡是在业务中有某些业务具有一定的通用性，某些场景下又具有一些特殊性，这类场景都可以用模板方法模式。</p> <p>因此，就给大家看一下开源库中的模板方法模式的应用吧。</p> <h4 id="在vue-router中的应用"><a href="#在vue-router中的应用" class="header-anchor">#</a> 在<code>vue-router</code>中的应用</h4> <p>它可以根据用户选择的模式决定应用特定模式的实现。</p> <p>在<code>vue-router/src/index.js</code>中，会根据用户选择的模式匹配相应的路由替换规则。（以版本<code>3.5.4</code>为例）</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 节选</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./history/hash&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> HTML5History <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./history/html5&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AbstractHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./history/abstract&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">VueRouter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> RouterOptions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> mode <span class="token operator">=</span> options<span class="token punctuation">.</span>mode <span class="token operator">||</span> <span class="token string">&quot;hash&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fallback <span class="token operator">=</span>
      mode <span class="token operator">===</span> <span class="token string">&quot;history&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>supportsPushState <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>fallback <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fallback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mode <span class="token operator">=</span> <span class="token string">&quot;hash&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inBrowser<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      mode <span class="token operator">=</span> <span class="token string">&quot;abstract&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mode <span class="token operator">=</span> mode<span class="token punctuation">;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>mode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;history&quot;</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HTML5History</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;hash&quot;</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashHistory</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>base<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;abstract&quot;</span><span class="token operator">:</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>history <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbstractHistory</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> options<span class="token punctuation">.</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">assert</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">invalid mode: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<code>vue-router/src/history</code>目录下，<code>History</code>类定义了一些基础的约束，面向不同<code>API</code>的实现策略，继承自<code>History</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 节选自vue-router/src/history/base.js</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">History</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已省略无关代码</span>
  <span class="token comment">// implemented by sub-classes</span>
  <span class="token operator">+</span>setupListeners<span class="token operator">:</span> Function<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 节选自vue-router/src/history/hash.js</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HashHistory</span> <span class="token keyword">extends</span> <span class="token class-name">History</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已省略无关代码</span>
  <span class="token comment">/**
   * 哈希模式用hashchange事件进行监听
   */</span>
  <span class="token function">setupListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> eventType <span class="token operator">=</span> supportsPushState <span class="token operator">?</span> <span class="token string">&quot;popstate&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;hashchange&quot;</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> handleRoutingEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> handleRoutingEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 节选自vue-router/src/history/history.js</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HTML5History</span> <span class="token keyword">extends</span> <span class="token class-name">History</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已省略无关代码</span>
  <span class="token comment">/**
   * Html5 History模式用popstate事件进行监听
   */</span>
  <span class="token function">setupListeners</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;popstate&quot;</span><span class="token punctuation">,</span> handleRoutingEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;popstate&quot;</span><span class="token punctuation">,</span> handleRoutingEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="在typeorm中的应用"><a href="#在typeorm中的应用" class="header-anchor">#</a> 在<code>typeorm</code>中的应用</h4> <p>在<code>typeorm</code>中（<code>nodejs</code>生态中大名鼎鼎的一个<code>ORM</code>库），它可以根据用户连接数据库，决定生成对应数据库的<code>SQL</code><strong>方言</strong>（这个词能够确切的阐述不同的数据库<code>SQL</code>语句的差异，所以就像我们普通话和四川话、湖南话的差异一样，所以叫做方言特别的贴切）：</p> <p><a href="https://github1s.com/typeorm/typeorm/blob/HEAD/src/query-runner/BaseQueryRunner.ts" target="_blank" rel="noopener noreferrer">BaseQueryRunner<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseQueryRunner</span> <span class="token punctuation">{</span>
  <span class="token comment">// 省略代码，有兴趣的读者可以直接在github查看</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://github1s.com/typeorm/typeorm/blob/HEAD/src/driver/mysql/MysqlQueryRunner.ts" target="_blank" rel="noopener noreferrer">MySQLQueryRunner<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MysqlQueryRunner</span> <span class="token keyword">extends</span> <span class="token class-name">BaseQueryRunner</span> <span class="token keyword">implements</span> <span class="token class-name">QueryRunner</span> <span class="token punctuation">{</span>
  <span class="token comment">// 省略无关代码，有兴趣的读者可以直接在github查看</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://github1s.com/typeorm/typeorm/blob/HEAD/src/driver/sqlserver/SqlServerQueryRunner.ts" target="_blank" rel="noopener noreferrer">SqlServerRunner<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SqlServerQueryRunner</span> <span class="token keyword">extends</span> <span class="token class-name">BaseQueryRunner</span> <span class="token keyword">implements</span> <span class="token class-name">QueryRunner</span> <span class="token punctuation">{</span>
  <span class="token comment">// 省略代码，有兴趣的读者可以直接在github查看</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其余数据库的 runner，有兴趣的同学可以自行查看。</p> <p>以下是两个<code>Driver</code>的示例：</p> <p><a href="https://github1s.com/typeorm/typeorm/blob/HEAD/src/driver/mysql/MysqlDriver.ts" target="_blank" rel="noopener noreferrer">MysqlDriver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * Organizes communication with MySQL DBMS.
 */</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MysqlDriver</span> <span class="token keyword">implements</span> <span class="token class-name">Driver</span> <span class="token punctuation">{</span>
  <span class="token comment">// 省略其他无关方法</span>
  <span class="token comment">/**
   * Creates a query runner used to execute database queries.
   */</span>
  <span class="token function">createQueryRunner</span><span class="token punctuation">(</span>mode<span class="token operator">:</span> ReplicationMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MysqlQueryRunner</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://github1s.com/typeorm/typeorm/blob/HEAD/src/driver/sqlserver/SqlServerDriver.ts" target="_blank" rel="noopener noreferrer">SqlServerDriver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * Organizes communication with SQL Server DBMS.
 */</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">SqlServerDriver</span> <span class="token keyword">implements</span> <span class="token class-name">Driver</span> <span class="token punctuation">{</span>
  <span class="token comment">// 省略其他无关方法</span>
  <span class="token comment">/**
   * Creates a query runner used to execute database queries.
   */</span>
  <span class="token function">createQueryRunner</span><span class="token punctuation">(</span>mode<span class="token operator">:</span> ReplicationMode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlServerQueryRunner</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后在调用侧，根据数据库的环境，选择对应的<code>Runner</code>就可以了（<code>typeorm</code>是选择跟对应的<code>Driver</code>绑定，这个无关紧要，因为最终还是会根据数据库类型选择对应的<code>Driver</code>），而且日后将来需要新增新的数据库支持，再编写一套对应的<code>QueryRunner</code>实现即可，这样的设计是符合<strong>开闭原则</strong>的。</p> <p>以下是<code>typeorm</code>的<code>Driver</code>工厂：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * Helps to create drivers.
 */</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DriverFactory</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * Creates a new driver depend on a given connection's driver type.
   */</span>
  <span class="token function">create</span><span class="token punctuation">(</span>connection<span class="token operator">:</span> DataSource<span class="token punctuation">)</span><span class="token operator">:</span> Driver <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> type <span class="token punctuation">}</span> <span class="token operator">=</span> connection<span class="token punctuation">.</span>options<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;mysql&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;postgres&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">PostgresDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;cockroachdb&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CockroachDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;sap&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SapDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;mariadb&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MysqlDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;sqlite&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqliteDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;better-sqlite3&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BetterSqlite3Driver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;cordova&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CordovaDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;nativescript&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NativescriptDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;react-native&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ReactNativeDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;sqljs&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqljsDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;oracle&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OracleDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;mssql&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlServerDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;mongodb&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MongoDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;expo&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ExpoDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;aurora-mysql&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuroraMysqlDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;aurora-postgres&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AuroraPostgresDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;capacitor&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CapacitorDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">&quot;spanner&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SpannerDriver</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">MissingDriverError</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;aurora-mysql&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;aurora-postgres&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;better-sqlite3&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;capacitor&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;cockroachdb&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;cordova&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;expo&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;mariadb&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;mongodb&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;mssql&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;nativescript&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;oracle&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sap&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sqlite&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;sqljs&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;spanner&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><div class="inner"><a href="/design-pattern/proxy.html" class="vp-link prev"><span>←</span>
  代理模式
  <span><br> <span class="prev-link">/design-pattern/proxy.html</span></span></a> <a href="/design-pattern/watcher.html" class="vp-link next">
  观察者模式
  <span>
        →
        <br> <span class="next-link">/design-pattern/watcher.html</span></span></a></div></div> </main> <div class="sticker vuepress-toc"><div class="on-this-page">ON THIS PAGE</div> <div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#模板方法模式" title="模板方法模式">模板方法模式</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_1、基本概念" title="1、基本概念">1、基本概念</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2、代码范式" title="2、代码范式">2、代码范式</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3、在前端开发中的实践" title="3、在前端开发中的实践">3、在前端开发中的实践</a></div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.64b517d5.js" defer></script><script src="/assets/js/2.bd5c3d55.js" defer></script><script src="/assets/js/12.335d2c6e.js" defer></script><script src="/assets/js/82.fbaef3d6.js" defer></script>
  </body>
</html>
